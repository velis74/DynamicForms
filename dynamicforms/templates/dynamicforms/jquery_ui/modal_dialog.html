{% load dynamicforms %}

{% if data.id %}
  {% set_var title=serializer.form_titles.edit %}
{% else %}
  {% set_var title=serializer.form_titles.new %}
{% endif %}

<div class="jquery-ui-dialog" tabindex="-1" role="dialog" aria-hidden="true">

  {% set_var template_list=DF.TEMPLATE|add:'base_form.html' %}
  {% include template_list with serializer=serializer data=data %}

  <div class="ui-dialog-buttonpane ui-widget-content ui-helper-clearfix">
    <div class="ui-dialog-buttonset">
      <button type="button" class="ui-button ui-corner-all ui-widget" id="save-{{ serializer.uuid }}">Save changes</button>
      <button type="button" class="ui-button ui-corner-all ui-widget close-btn">Close</button>
    </div>
  </div>

  <script type="text/javascript">
    $(".jquery-ui-dialog").dialog({
      title: "{{ title }}",
      modal: true,
      resizable: true,
      dialogClass: "modal"
    });

    $(".jquery-ui-dialog").parent().attr("id", "dialog-{{ serializer.uuid }}");

    $(".close-btn").click(function (event) {
      $(".jquery-ui-dialog").dialog('close');
    });
  </script>

</div>
