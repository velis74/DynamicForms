(function(e){function t(t){for(var a,o,s=t[0],l=t[1],d=t[2],u=0,f=[];u<s.length;u++)o=s[u],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&f.push(i[o][0]),i[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);c&&c(t);while(f.length)f.shift()();return r.push.apply(r,d||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,s=1;s<n.length;s++){var l=n[s];0!==i[l]&&(a=!1)}a&&(r.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},i={app:0},r=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var d=0;d<s.length;d++)t(s[d]);var c=l;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0332":function(e,t,n){"use strict";n("109f")},"0d44":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:"modal fade "+e.className,attrs:{id:e.uuid,tabindex:"-1",role:"dialog","aria-hidden":"true"}},[n("div",{class:"modal-dialog "+e.sizeClass,attrs:{role:"document"}},[n("div",{staticClass:"modal-content"},[n("div",{class:"modal-header "+e.headerClasses},[n("h5",{staticClass:"modal-title"},[e._v(e._s(e.title))]),e._m(0)]),n("transition",{attrs:{name:"flip",mode:"out-in"}},[e.isComponent?n("div",{key:e.uniqId,staticClass:"modal-body"},[n(e.body.component,e._b({tag:"div"},"div",e.body,!1))],1):n("div",{key:e.uniqId,staticClass:"modal-body",domProps:{innerHTML:e._s(e.body)}})]),n("div",{staticClass:"modal-footer"},e._l(e.buttons,(function(t){return n("button",e._b({key:t.uuid,class:t.classes,attrs:{id:t.element_id||t.uuid,type:"button"},on:{click:function(n){return n.stopPropagation(),e.buttonClick(n,t,e.callback)}}},"button",t.arias,!1),[e._v(e._s(t.label)+" ")])})),0)],1)])])},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[n("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])}],r=(n("caad"),n("d81d"),n("ac1f"),n("1276"),n("c975"),n("a15b"),n("b64b"),n("a9e3"),n("99af"),n("13d5"),n("cbde")),o=n("b6bd"),s=n("db3f"),l=n("1157"),d=(n("4989"),n("c950")),c=n("cf2c"),u={name:"modalhandler",components:{dfformlayout:o["a"],dfloadingindicator:s["a"]},data:function(){return{dialogs:[],initialEventAssignDone:!1,uniqIdCounter:0,inFlightRequests:{}}},computed:{className:function(){return"df-modal-handler"},bootstrapDialog:function(){return".df-modal-handler"},currentDialog:function(){var e=this.dialogs.length?this.dialogs[this.dialogs.length-1]:null;return e&&(e.uniqId=e.uniqId||this.uniqIdCounter++),e},sizeClass:function(){var e=this.currentDialog;return e?e.large||["large","lg","modal-lg"].includes(e.size)?"modal-lg":e.small||["small","sm","modal-sm"].includes(e.size)?"modal-sm":"":"modal-sm"},headerClasses:function(){var e=this.currentDialog;return e&&e.header_classes||""},title:function(){return this.currentDialog?this.currentDialog.title:"No dialogs to show!"},body:function(){return this.currentDialog?this.currentDialog.body:"No dialogs have been invoked"},callback:function(){return this.currentDialog?this.currentDialog.callback:null},uniqId:function(){return this.currentDialog?this.currentDialog.uniqId:null},isComponent:function(){return Boolean(this.currentDialog&&this.currentDialog.body&&this.currentDialog.body.component)},uuid:function(){return this.currentDialog&&this.currentDialog.uuid?"dialog-".concat(this.currentDialog.uuid):"df-modal-handler"},isShowingProgress:function(){return this.currentDialog&&!0===this.currentDialog.isProgress},buttons:function(){var e=this,t=this.currentDialog?this.currentDialog.buttons:null,n=this.currentDialog&&t?t:[{close:"default"}];return n.map((function(t){"default"===t.close?t={label:e.gettext("Close"),classes:"btn btn-secondary",data_return:"close"}:"default"===t.yes?t={label:e.gettext("Yes"),classes:"btn btn-primary",data_return:"yes"}:"default"===t.no&&(t={label:e.gettext("No"),classes:"btn btn-secondary",data_return:"no"}),t.arias=t.arias||{};var n=(t.classes||"").split(" ");return-1===n.indexOf("btn")&&n.push("btn"),t.classes=n.join(" "),t}))}},created:function(){var e=this;c["a"].dialog||(c["a"].dialog=this,window.setInterval((function(){e.progressDialogCheck()}),250))},methods:{show:function(){var e=this;this.initialEventAssignDone||(this.initialEventAssignDone=!0,l(this.bootstrapDialog).on("hide.bs.modal",(function(t){var n=null;e.dialogs.length&&(n=e.dialogs.pop().callback),e.dialogs.length&&t.preventDefault(),n&&!0!==n.df_called&&n(null)}))),l(this.bootstrapDialog).modal("show")},hide:function(){l(this.bootstrapDialog).modal("hide")},gettext:function(e){return e},buttonClick:function(e,t,n){d["a"].$emit("tableActionExecuted_".concat(this.currentDialog.tableUuid),{action:t,data:this.currentDialog.body.record,modal:this,event:e}),n&&(n(t.data_return),n.df_called=!0)},message:function(e,t,n){this.dialogs.push({title:e,body:t,buttons:[{close:"default"}],callback:n}),this.show()},yesNo:function(e,t,n){this.dialogs.push({title:e,body:t,buttons:[{yes:"default"},{no:"default"}],callback:n}),this.show()},loading:function(){return Object.keys(this.inFlightRequests).length},oldestInFlight:function(){var e=this.inFlightRequests,t=Object.keys(e);return 0===t.length?{requestId:null,timestamp:null,age:null}:{requestId:t[0],timestamp:e[t[0]],age:(new Date).getTime()-e[t[0]]}},progressDialogCheck:function(){var e=this;this.oldestInFlight().age>=250&&!this.isShowingProgress?this.showProgress():this.oldestInFlight().age>=250&&this.isShowingProgress?r["a"].get("/dynamicforms/progress/",{headers:{"x-df-timestamp":this.oldestInFlight().timestamp}}).then((function(t){e.isShowingProgress&&(e.currentDialog.body.progress=Number(t.data.value),e.currentDialog.body.label=t.data.comment)})).catch((function(e){console.error(e)})):0===this.loading()&&this.isShowingProgress&&this.hide()},showProgress:function(){console.log("Showing progress: We have ".concat(this.loading()," active requests to server oldest is ")+"".concat(this.oldestInFlight().age,"ms old with timestamp ").concat(this.oldestInFlight().timestamp,"."));var e="Performing operation";this.dialogs.push({title:e,body:{component:"dfloadingindicator",loading:!0,label:null,progress:null,data:!0},buttons:[],callback:null,isProgress:!0}),this.show()},addRequest:function(e){return this.inFlightRequests[e]=(new Date).getTime(),{sequence:e,timestamp:this.inFlightRequests[e]}},removeRequest:function(e){e&&(delete this.inFlightRequests[e],this.progressDialogCheck())},showComponent:function(e,t,n){var a=e.data.dialog.actions;this.dialogs.push({uuid:e.data.uuid,title:e.data.titles[t||"new"],body:{uuid:e.data.uuid,rows:e.data.dialog.rows,record:e.data.record,component:e.data.dialog.component_name},buttons:Object.keys(a).reduce((function(t,n){return a[n].data_return={dialog_id:e.data.uuid,button:a[n]},t.push(a[n]),t}),[]),callback:null,size:e.data.dialog.size,header_classes:e.data.dialog.header_classes,tableUuid:n}),this.show()},fromURL:function(e,t,n){var a=this;r["a"].get(e,{headers:{"x-viewmode":"FORM","x-df-render-type":"dialog"}}).then((function(e){a.showComponent(e.data,t,n)})).catch((function(e){console.error(e)}))}}},f=u,m=n("2877"),h=Object(m["a"])(f,a,i,!1,null,"baac120c",null);t["a"]=h.exports},"109f":function(e,t,n){},1440:function(e,t,n){},1450:function(e,t,n){},"16b5":function(e,t,n){},"17a6":function(e,t,n){},"2e21":function(e,t,n){},4703:function(e,t,n){},5129:function(e,t,n){"use strict";n("16b5")},"56d7":function(e,t,n){"use strict";n.r(t),function(e){n("e260"),n("e6cf"),n("cca6"),n("a79d");var t=n("a026"),a=n("fdf9"),i=n("0d44"),r=n("85fe"),o=n("bc3a"),s=n.n(o),l=n("1157"),d=n.n(l),c=n("8be3"),u=n("cf2c");t["default"].config.productionTip=!1,t["default"].use(r["a"]),t["default"].component("dftable",a["a"]),t["default"].component("example",c["a"]);var f=function(e){return new t["default"]({el:"#".concat(e),components:{ModalHandler:i["a"]},template:"<ModalHandler></ModalHandler>"})},m=function(e,t){s.a.get(e,{headers:{"x-viewmode":"TABLE_ROW","x-pagination":1,"x-df-component-def":!0}}).then((function(e){t(e.data)})).catch((function(e){alert(e.data)}))},h=function(e,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return"undefined"===typeof window.dynamicforms&&(window.dynamicforms={}),!u["a"].dialog&&r&&f(r),new t["default"]({el:"#".concat(e),template:n,data:function(){return i},components:{dftable:a["a"],example:c["a"]}})};window.$=d.a,window.$,window.createApp=h,window.getComponentDef=m}.call(this,n("1157"))},5951:function(e,t,n){"use strict";n("2e21")},5970:function(e,t,n){"use strict";n("1440")},8829:function(e,t,n){},"8be3":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{attrs:{id:"titlebar"}},[n("div",{attrs:{id:"hamburger"},on:{click:function(t){t.stopPropagation(),e.menuShown=!e.menuShown}}},[e._v(" ☰ "),n("span",{attrs:{id:"page-title"}},[e._v(e._s(e.title))])])]),n("transition",{attrs:{name:"fade"}},[e.menuShown?n("div",{staticClass:"sidenav-group"},[n("div",{attrs:{id:"sidenav-overlay"},on:{click:function(t){t.stopPropagation(),e.menuShown=!e.menuShown}}}),n("div",{staticClass:"sidenav",attrs:{id:"side-nav"}},[n("router-link",{attrs:{to:"/validated"}},[e._v("Validated")]),n("router-link",{attrs:{to:"/hidden-fields"}},[e._v("Hidden fields")]),n("router-link",{attrs:{to:"/basic-fields"}},[e._v("Basic fields")]),n("router-link",{attrs:{to:"/advanced-fields"}},[e._v("Advanced fields")]),n("router-link",{attrs:{to:"/page-load"}},[e._v("Page loading")]),n("router-link",{attrs:{to:"/filter"}},[e._v("Filter")]),n("a",{attrs:{href:"#"},on:{click:function(t){return t.stopPropagation(),e.showSingleDialog.apply(null,arguments)}}},[e._v("Pop-up dialog")]),n("a",{attrs:{href:"#",onclick:"singleDialog()"}},[e._v("Choice allow tags dialog")]),n("router-link",{attrs:{to:"/refresh-types"}},[e._v("Refresh types")]),n("router-link",{attrs:{to:"/calculated-css-class-for-table-row"}},[e._v("Row css style")]),n("router-link",{attrs:{to:"/choice-allow-tags-fields"}},[e._v("Tag select fields")])],1)]):e._e()]),n("div",{attrs:{id:"main"}},[n("router-view",{on:{"title-change":function(t){e.title=t}}})],1)],1)},i=[],r=(n("c975"),n("ac1f"),n("5319"),n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),n("8c4f")),o=n("a026"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.config?n(e.component,{key:e.config.uuid,tag:"div",attrs:{config:e.config}}):e._e()},l=[],d=n("fdf9"),c=n("b6bd"),u=n("bc3a"),f=n.n(u),m={name:"pageloader",components:{dftable:d["a"],dfformlayout:c["a"]},data:function(){return{url:null,component:"dftable",config:null}},mounted:function(){this.goToRoute(this.$route)},methods:{goToRoute:function(e){var t=this;this.url="".concat(e.path,".component"),this.component=e.meta.component||"dftable",f.a.get(this.url,{headers:{"x-viewmode":"TABLE_ROW","x-pagination":1,"x-df-render-type":"component-def"}}).then((function(e){t.config=e.data,t.$emit("title-change",e.data.titles.table)})).catch((function(e){console.log(e),alert("Error retrieving component def:\n".concat(e.data))}))}},watch:{$route:function(e){this.goToRoute(e)}}},h=m,p=n("2877"),g=Object(p["a"])(h,s,l,!1,null,null,null),b=g.exports,_=n("c950"),w=n("cbde"),v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("p",{attrs:{id:"single_dialog_instructions"}},[e._v("This dialog's form is pre-populated with data of your (the programmer) choosing. When you make your choice and send it back to the server, the server will process the result and return it back to the client.")]),e._m(0),n("dfformlayout",{attrs:{rows:e.rows,uuid:e.uuid,record:e.record}})],1)},y=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{attrs:{id:"single_dialog_instructions_list"}},[e._v(" It is up to you to choose how the data is going to be returned: "),n("li",[e._v('Click "Say it" to have it returned as JSON and displayed in a dialog')]),n("li",[e._v('Click "Download it" to have it returned as a downloadable text file')])])}],x={name:"examples-single_dialog.html",props:["rows","uuid","record"],components:{dfformlayout:c["a"]}},C=x,k=Object(p["a"])(C,v,y,!1,null,null,null),O=k.exports,D=n("cf2c");o["default"].use(r["a"]),o["default"].component(O.name,O);var T="fake-uuid-654654-634565",E=[{path:"/validated",component:b},{path:"/hidden-fields",component:b},{path:"/basic-fields",component:b},{path:"/advanced-fields",component:b},{path:"/page-load",component:b},{path:"/filter",component:b},{path:"/refresh-types",component:b},{path:"/calculated-css-class-for-table-row",component:b},{path:"/single-dialog/:id",component:b,meta:{component:"dialog",uuid:T}},{path:"/choice-allow-tags-fields",component:b}],j=new r["a"]({routes:E}),L={name:"example",components:{},router:j,data:function(){return{menuShown:!1,title:""}},mounted:function(){"/"===j.history.current.path&&j.push("/validated"),_["a"].$on("tableActionExecuted_".concat(T),this.singleDialogBtnClick)},beforeDestroy:function(){_["a"].$off("tableActionExecuted_".concat(T))},methods:{showSingleDialog:function(){this.menuShown=!this.menuShown,D["a"].dialog.fromURL("/single-dialog/new.component","new",T)},singleDialogBtnClick:function(e){"say_it"===e.action.name?w["a"].post("/single-dialog.json",e.data).then((function(t){alert(t.data.test),e.modal.hide()})):"download"===e.action.name?(e.data.download="1",w["a"].post("/single-dialog.json",e.data).then((function(t){var n="",a=t.headers["Content-Disposition"];if(a&&-1!==a.indexOf("attachment")){var i=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/,r=i.exec(a);null!=r&&r[1]&&(n=r[1].replace(/['"]/g,""))}var o=window.URL.createObjectURL(new Blob([t.data])),s=document.createElement("a");s.href=o,s.setAttribute("download",n),s.innerHTML=n,document.body.appendChild(s),s.click(),e.modal.hide()}))):"cancel"===e.action.name&&e.modal.hide()}}},R=L,S=(n("5970"),Object(p["a"])(R,a,i,!1,null,"560b60c9",null));t["a"]=S.exports},"8c2d":function(e,t,n){"use strict";n("dca8");var a=Object.freeze({SUPPRESS:1,HIDDEN:5,INVISIBLE:8,FULL:10});t["a"]=a},"92a7":function(e,t,n){"use strict";n("8829")},"9d25":function(e,t,n){"use strict";n("bcf0")},b6bd:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{attrs:{id:e.uuid}},[e._t("form-error",(function(){return[e.getErrorText?n("div",[n("small",{staticClass:"form-text text-danger",attrs:{id:"form-"+e.uuid+"-err"}},[e._v(e._s(e.getErrorText))]),n("hr")]):e._e()]})),e._l(e.rows,(function(t,a){return n("dfformrow",{key:a,attrs:{columns:t,data:e.record,errors:e.errors}})}))],2)},i=[],r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isHiddenSingle?n("dfformcolumn",{attrs:{def:e.writableColumns[0],data:e.data,errors:e.errors}}):n("div",{staticClass:"row align-items-end"},e._l(e.writableColumns,(function(t,a){return n("dfformcolumn",{key:a,attrs:{def:t,data:e.data,errors:e.errors}})})),1)},o=[],s=(n("4de4"),n("8c2d")),l=n("f781"),d={name:"dfformrow",props:["columns","data","errors"],computed:{writableColumns:function(){return this.columns.filter((function(e){return!0!==e.field.read_only}))},isHiddenSingle:function(){return 1===this.writableColumns.length&&this.writableColumns[0].field.visibility.form===s["a"].HIDDEN}},components:{dfformcolumn:l["a"]}},c=d,u=n("2877"),f=Object(u["a"])(c,r,o,!1,null,"72c0ebbc",null),m=f.exports,h=n("c950"),p={name:"dfformlayout",props:{rows:{},uuid:{},record:{default:null}},mounted:function(){var e=this;h["a"].$on("formEvents_".concat(this.uuid),(function(t){"submitErrors"===t.type&&(e.errors=t.data)}))},data:function(){return{errors:{}}},computed:{getErrorText:function(){var e="non_field_errors";try{if(this.errors&&this.errors[e])return this.errors[e]}catch(t){}return""}},components:{dfformrow:m},beforeDestroy:function(){h["a"].$off("formEvents_".concat(this.uuid))}},g=p,b=Object(u["a"])(g,a,i,!1,null,"54064146",null);t["a"]=b.exports},b9c1:function(e,t,n){"use strict";n("4703")},bcf0:function(e,t,n){},c950:function(e,t,n){"use strict";var a=n("a026"),i=new a["default"];t["a"]=i},cbde:function(e,t,n){"use strict";n("caad"),n("2532"),n("d81d"),n("d3b7"),n("ddb0");var a=n("bc3a"),i=n.n(a),r=n("2ef0"),o=n.n(r),s=n("cf2c"),l=2083,d=i.a.create({xsrfCookieName:"csrftoken",xsrfHeaderName:"X-CSRFToken",withCredentials:!1}),c=0;d.interceptors.request.use((function(e){if(!e.url.includes("/dynamicforms/progress")){var t=s["a"].dialog.addRequest(++c);e.sequence=t.sequence,e.headers["x-df-timestamp"]=e.headers["x-df-timestamp"]||t.timestamp}if("get"===o.a.toLower(e.method)&&o.a.size(e.url)>l&&o.a.includes(o.a.map(o.a.keys(e.headers),(function(e){return o.a.toLower(e)})),"x-viewmode")){var n="Your request exceeds maximum length";throw s["a"].dialog.message("error",n),new i.a.Cancel(n)}return e})),d.interceptors.response.use((function(e){return s["a"].dialog.removeRequest(e.config.sequence),e}),(function(e){return s["a"].dialog.removeRequest(e.config.sequence),e})),t["a"]=d},cf2c:function(e,t,n){"use strict";n("13d5"),n("ac1f"),n("1276");var a={getObjectFromPath:function(e){if(e)try{return e.split(".").reduce((function(e,t){return e[t]||{}}),window)}catch(t){}}};t["a"]=a,window.dynamicforms=a},db3f:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.loading?n("div",[e.progress?n("div",[n("h3",[e._v(e._s(e.label))]),n("div",{staticClass:"progress progress-striped progress-bar-animated"},[n("div",{staticClass:"progress-bar",style:"width: "+e.progress+"%",attrs:{role:"progressbar","aria-valuemax":"100","aria-valuemin":"0","aria-valuenow":"progress"}},[e._v(" "+e._s(e.progress)+"% ")])])]):n("div",{staticClass:"lds-ellipsis"},[n("div"),n("div"),n("div"),n("div")])]):e._e()},i=[],r=(n("a9e3"),{name:"dfloadingindicator",props:{loading:{type:Boolean,required:!0},label:{type:String,required:!1},progress:{type:Number,required:!1}}}),o=r,s=(n("9d25"),n("2877")),l=Object(s["a"])(o,a,i,!1,null,"0cd5ffac",null);t["a"]=l.exports},e4d7:function(e,t,n){"use strict";n("17a6")},e80a:function(e,t,n){"use strict";n("1450")},f781:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isGroup?n("div",{class:e.cssClasses},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-header"},[e._v(" "+e._s(e.def.title)+" ")]),n("div",{staticClass:"card-body"},[n(e.def.field.render_params.form.replace(/-/g,""),{tag:"component",attrs:{def:e.def.field,data:e.data,errors:e.errors,showLabelOrHelpText:e.showLabelOrHelpText}})],1),e.def.footer?n("div",{staticClass:"card-footer"},[e._v(" "+e._s(e.def.footer)+" ")]):e._e()])]):e.isHidden?n(e.def.field.render_params.form.replace(/-/g,""),{tag:"component",attrs:{def:e.def.field,data:e.data,errors:e.errors,showLabelOrHelpText:e.showLabelOrHelpText}}):n("div",{class:e.cssClasses+e.columnClasses},[n(e.def.field.render_params.form.replace(/-/g,""),{tag:"component",attrs:{def:e.def.field,data:e.data,errors:e.errors,showLabelOrHelpText:e.showLabelOrHelpText},on:{onValueConfirmed:e.onValueConfirmed}})],1)},i=[],r=n("8c2d"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("dfwidgetbase",{attrs:{def:e.def,data:e.data,errors:e.errors,showLabelOrHelpText:e.showLabelOrHelpText}},["checkbox"===e.def.render_params.input_type?n("input",{directives:[{name:"model",rawName:"v-model",value:e.data[e.def.name],expression:"\n/* eslint-disable */\ndata[def.name]"}],class:e.def.render_params.class,attrs:{slot:"input",id:e.def.uuid,name:e.def.name,"aria-describedby":e.def.help_text&&e.showLabelOrHelpText?e.def.name+"-help":null,placeholder:e.def.placeholder,pattern:e.def.render_params.pattern,min:e.def.render_params.min,max:e.def.render_params.max,step:e.def.render_params.step,minlength:e.def.render_params.minlength,maxlength:e.def.render_params.maxlength,size:e.def.render_params.size,type:"checkbox"},domProps:{checked:Array.isArray(e.data[e.def.name])?e._i(e.data[e.def.name],null)>-1:e.data[e.def.name]},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onValueConfirmed(!0)},input:function(t){return e.onValueConfirmed(!1)},change:[function(t){var n=e.data[e.def.name],a=t.target,i=!!a.checked;if(Array.isArray(n)){var r=null,o=e._i(n,r);a.checked?o<0&&e.$set(e.data,e.def.name,n.concat([r])):o>-1&&e.$set(e.data,e.def.name,n.slice(0,o).concat(n.slice(o+1)))}else e.$set(e.data,e.def.name,i)},function(t){return e.onValueConfirmed(!1)}]},slot:"input"}):"radio"===e.def.render_params.input_type?n("input",{directives:[{name:"model",rawName:"v-model",value:e.data[e.def.name],expression:"\n/* eslint-disable */\ndata[def.name]"}],class:e.def.render_params.class,attrs:{slot:"input",id:e.def.uuid,name:e.def.name,"aria-describedby":e.def.help_text&&e.showLabelOrHelpText?e.def.name+"-help":null,placeholder:e.def.placeholder,pattern:e.def.render_params.pattern,min:e.def.render_params.min,max:e.def.render_params.max,step:e.def.render_params.step,minlength:e.def.render_params.minlength,maxlength:e.def.render_params.maxlength,size:e.def.render_params.size,type:"radio"},domProps:{checked:e._q(e.data[e.def.name],null)},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onValueConfirmed(!0)},input:function(t){return e.onValueConfirmed(!1)},change:[function(t){return e.$set(e.data,e.def.name,null)},function(t){return e.onValueConfirmed(!1)}]},slot:"input"}):n("input",{directives:[{name:"model",rawName:"v-model",value:e.data[e.def.name],expression:"\n/* eslint-disable */\ndata[def.name]"}],class:e.def.render_params.class,attrs:{slot:"input",id:e.def.uuid,name:e.def.name,"aria-describedby":e.def.help_text&&e.showLabelOrHelpText?e.def.name+"-help":null,placeholder:e.def.placeholder,pattern:e.def.render_params.pattern,min:e.def.render_params.min,max:e.def.render_params.max,step:e.def.render_params.step,minlength:e.def.render_params.minlength,maxlength:e.def.render_params.maxlength,size:e.def.render_params.size,type:e.def.render_params.input_type},domProps:{value:e.data[e.def.name]},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onValueConfirmed(!0)},input:[function(t){t.target.composing||e.$set(e.data,e.def.name,t.target.value)},function(t){return e.onValueConfirmed(!1)}],change:function(t){return e.onValueConfirmed(!1)}},slot:"input"})])},s=[],l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isHidden?n("input",{attrs:{type:"hidden",name:e.def.name},domProps:{value:e.data[e.def.name]}}):n("div",{class:e.def.render_params.container_class,attrs:{id:"container-"+e.def.uuid}},[e._t("error",(function(){return[e.getErrorText?n("small",{staticClass:"form-text text-danger",attrs:{id:e.def.name+"-err"}},[e._v(e._s(e.getErrorText))]):e._e()]})),!1===e.labelAfterElement&&e.showLabelOrHelpText?n("dfwidgetbaselabel",{attrs:{data:e.data,def:e.def}}):e._e(),e._t("input"),e.labelAfterElement&&e.showLabelOrHelpText?n("dfwidgetbaselabel",{attrs:{data:e.data,def:e.def}}):e._e(),e._t("help",(function(){return[e.def.help_text&&e.showLabelOrHelpText?n("small",{staticClass:"form-text text-muted",attrs:{id:e.def.name+"-help"}},[e._v(e._s(e.def.help_text))]):e._e()]}))],2)},d=[],c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.def.label?n("label",{attrs:{id:"label-"+e.def.uuid,for:e.def.uuid,def:e.def,data:e.data}},[e._v(e._s(e.def.label))]):e._e()},u=[],f={name:"dfwidgetbaselabel",props:["def","data"]},m=f,h=n("2877"),p=Object(h["a"])(m,c,u,!1,null,"0d3709c4",null),g=p.exports,b={name:"dfwidgetbase",props:{def:{type:Object,required:!0},data:{type:Object,required:!0},errors:{type:Object,required:!0},showLabelOrHelpText:{type:Boolean,default:!0}},computed:{isHidden:function(){return this.def.visibility.form===r["a"].HIDDEN},labelAfterElement:function(){return this.def.render_params.label_after_element},getErrorText:function(){try{if(this.errors&&this.errors[this.def.name])return this.errors[this.def.name]}catch(e){}return""}},components:{dfwidgetbaselabel:g}},_=b,w=Object(h["a"])(_,l,d,!1,null,"10e8c957",null),v=w.exports,y={name:"dfwidgetinput",props:{def:{type:Object,required:!0},data:{type:Object,required:!0},errors:{type:Object,required:!0},showLabelOrHelpText:{type:Boolean,default:!0}},methods:{onValueConfirmed:function(e){this.$emit("onValueConfirmed",e)}},components:{dfwidgetbase:v}},x=y,C=Object(h["a"])(x,o,s,!1,null,"7f01b868",null),k=C.exports,O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("dfwidgetbase",{attrs:{def:e.def,data:e.data,errors:e.errors,showLabelOrHelpText:e.showLabelOrHelpText}},[n("div",{staticClass:"input-group",attrs:{slot:"input"},slot:"input"},["checkbox"===e.passwordFieldType?n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],class:e.def.render_params.class,attrs:{id:e.def.uuid,name:e.def.name,"aria-describedby":e.def.help_text&&e.showLabelOrHelpText?e.def.name+"-help":null,placeholder:e.def.placeholder,pattern:e.def.render_params.pattern,type:"checkbox"},domProps:{value:e.data[e.def.name],checked:Array.isArray(e.password)?e._i(e.password,e.data[e.def.name])>-1:e.password},on:{change:function(t){var n=e.password,a=t.target,i=!!a.checked;if(Array.isArray(n)){var r=e.data[e.def.name],o=e._i(n,r);a.checked?o<0&&(e.password=n.concat([r])):o>-1&&(e.password=n.slice(0,o).concat(n.slice(o+1)))}else e.password=i}}}):"radio"===e.passwordFieldType?n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],class:e.def.render_params.class,attrs:{id:e.def.uuid,name:e.def.name,"aria-describedby":e.def.help_text&&e.showLabelOrHelpText?e.def.name+"-help":null,placeholder:e.def.placeholder,pattern:e.def.render_params.pattern,type:"radio"},domProps:{value:e.data[e.def.name],checked:e._q(e.password,e.data[e.def.name])},on:{change:function(t){e.password=e.data[e.def.name]}}}):n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],class:e.def.render_params.class,attrs:{id:e.def.uuid,name:e.def.name,"aria-describedby":e.def.help_text&&e.showLabelOrHelpText?e.def.name+"-help":null,placeholder:e.def.placeholder,pattern:e.def.render_params.pattern,type:e.passwordFieldType},domProps:{value:e.data[e.def.name],value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),n("span",{staticClass:"input-group-text",class:e.isPassword?"password-field":"password-field-slash",on:{click:e.toggle_password}})])])},D=[],T={name:"dfwidgetpassword",props:{def:{type:Object,required:!0},data:{type:Object,required:!0},errors:{type:Object,required:!0},showLabelOrHelpText:{type:Boolean,default:!0}},data:function(){return{password:"",passwordFieldType:"password",isPassword:!0}},methods:{toggle_password:function(){this.isPassword=!this.isPassword,this.passwordFieldType="password"===this.passwordFieldType?"text":"password"}},components:{dfwidgetbase:v}},E=T,j=Object(h["a"])(E,O,D,!1,null,"c159da02",null),L=j.exports,R=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("dfwidgetbase",{attrs:{def:e.def,data:e.data,errors:e.errors,showLabelOrHelpText:e.showLabelOrHelpText}},[n("ckeditor",{attrs:{slot:"input",editor:e.editor,config:e.editorConfig},slot:"input",model:{value:e.editorData,callback:function(t){e.editorData=t},expression:"editorData"}})],1)},S=[],$=n("6930"),q=n.n($),I=n("fb3d"),A=n.n(I),H={name:"dfwidgetckeditor",props:{def:{type:Object,required:!0},data:{type:Object,required:!0},errors:{type:Object,required:!0},showLabelOrHelpText:{type:Boolean,default:!0}},data:function(){return{editor:A.a,editorData:"<p>Content of the editor.</p>",editorConfig:{}}},components:{dfwidgetbase:v,ckeditor:q.a.component}},F=H,P=Object(h["a"])(F,R,S,!1,null,"59a80b6b",null),N=P.exports,U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("dfwidgetbase",{attrs:{def:e.def,data:e.data,errors:e.errors,showLabelOrHelpText:e.showLabelOrHelpText}},[n("div",{key:e.def.uuid,staticClass:"df-select-class",attrs:{slot:"input",id:e.def.uuid,name:e.def.name,"data-value":e.selenium?e.result:null,"data-options":e.selenium?e.options_json:null},slot:"input"},[n("multiselect",{attrs:{options:e.options,"close-on-select":!0,"clear-on-select":!0,"hide-selected":!1,"preserve-search":!0,"preselect-first":!1,label:"text","track-by":"id",disabled:e.disabled,multiple:e.multiple,taggable:e.taggable,"aria-describedby":e.def.help_text&&e.showLabelOrHelpText?e.def.field_name+"-help":null,placeholder:e.def.placeholder},on:{select:e.onSelect,input:e.onInput,tag:e.onTag},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)])},V=[],B=(n("d81d"),n("ac1f"),n("1276"),n("4de4"),n("caad"),n("2532"),n("7db0"),n("8e5f")),M=n.n(B),z={name:"dfwidgetselect",props:{def:{type:Object,required:!0},data:{type:Object,required:!0},errors:{type:Object,required:!0},showLabelOrHelpText:{type:Boolean,default:!0}},data:function(){return{selected:null,disabled:!1,required:!1,selenium:!0}},computed:{options:function(){return this.def.choices},options_json:function(){return JSON.stringify(this.options)},multiple:function(){return this.def.render_params.multiple},taggable:function(){return this.def.render_params.allow_tags},result:{get:function(){return this.selected?this.multiple?this.selected.map((function(e){return e.id})):this.selected.id:""},set:function(e){if(e)if(this.multiple){var t=e.constructor===Array?e:e.split(",");this.selected=this.options.filter((function(e){return t.includes("".concat(e.id))}))}else this.selected=this.options.find((function(t){return t.id===e}));else this.selected=null}}},emits:["update:modelValue"],mounted:function(){var e=this;this.multiple||this.def.allow_null||this.data[this.def.name]||!this.options?this.result=this.data[this.def.name]:this.result=this.options[0].id,this.selenium&&(window["setSelectValue ".concat(this.def.uuid)]=function(t){e.result=t})},destroyed:function(){this.selenium&&delete window["setSelectValue ".concat(this.def.uuid)]},methods:{onSelect:function(e){this.data[this.def.name]=this.result,this.$emit("itemSelected",e),this.$emit("onValueConfirmed",!0)},onInput:function(e){null===e&&(this.data[this.def.name]=this.result,this.$emit("itemSelected",e))},onTag:function(e){var t={id:e,text:e};this.def.choices.push(t),this.multiple?this.selected.push(t):this.selected=t}},watch:{selected:function(){this.data[this.def.name]=this.result}},components:{dfwidgetbase:v,Multiselect:M.a}},W=z,K=(n("0332"),Object(h["a"])(W,U,V,!1,null,"bc745a38",null)),J=K.exports,Q={name:"dfformcolumn",props:{def:{type:Object,required:!0},data:{type:Object,required:!0},errors:{type:Object,required:!0},showLabelOrHelpText:{type:Boolean,default:!0},cssClasses:{type:String,default:"col"}},computed:{isGroup:function(){return"group"===this.def.type},isHidden:function(){return this.def.field.visibility.form===r["a"].HIDDEN},columnClasses:function(){return this.def.width_classes?" ".concat(this.def.width_classes):""}},methods:{onValueConfirmed:function(e){this.$emit("onValueConfirmed",e)}},components:{dfwidgetinput:k,dfwidgetpassword:L,dfwidgetckeditor:N,dfwidgetselect:J}},G=Q,Y=(n("b9c1"),Object(h["a"])(G,a,i,!1,null,"8f2ff37c",null));t["a"]=Y.exports},fdf9:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n(e.component+"table",{tag:"component",attrs:{configuration:e.processedConfiguration},on:{setTableFilter:e.setTableFilter}})],1)},i=[],r=n("5530"),o=(n("4de4"),n("159b"),n("99af"),n("d81d"),n("4e82"),n("d3b7"),n("ac1f"),n("5319"),n("caad"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"card"},[n("div",{staticClass:"card-header"},[e._v(e._s(e.configuration.titles.table)+" "),n("div",{staticClass:"float-right"},[n("Actions",{attrs:{actions:e.configuration.actions.filter("HEADER")}})],1)]),n("div",{staticClass:"card-body"},[n("table",{staticClass:"table"},[n("dftablehead",{attrs:{columns:e.configuration.columns,filter:e.configuration.filter},on:{setTableFilter:e.setTableFilter}}),n("dftablebody",{attrs:{columns:e.configuration.columns,rows:e.configuration.rows,loading:e.configuration.loading,actions:e.configuration.actions}}),n("dftablefoot",{attrs:{columns:e.configuration.columns,rows:e.configuration.rows,loading:e.configuration.loading,noDataString:e.configuration.noDataString}})],1)])])])}),s=[],l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",[n("tr",e._l(e.columns,(function(t,a){return n("th",{key:t.name,class:t.th_classes,style:"text-align: "+t.alignment,on:{click:function(n){return e.colClicked(n,t,a)}}},[e._v(" "+e._s(t.label)+" "),t.isOrdered?n("span",{staticClass:"ordering"},[n("div",{staticClass:"ordering-arrow"},[e._v(e._s(t.ascDescChar))]),e._v(" "+e._s(t.orderIndexChar)+" ")]):e._e()])})),0),e.filter?n("dftablefilterrow",{attrs:{configuration:e.filter},on:{setTableFilter:e.setTableFilter}}):e._e()],1)},d=[],c=(n("2532"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("tr",{staticClass:"dynamicforms-filterrow"},[e.actionsRowStart.list.length?n("th",{staticClass:"tr-th-action"},[n("Actions",{attrs:{row:null,actions:e.actionsRowStart}})],1):e._e(),e._l(e.columns,(function(t,a){return n("th",{key:a},[n("dfformcolumn",{key:a,attrs:{def:{field:t},data:e.filter,errors:{},showLabelOrHelpText:!1,cssClasses:""},on:{onValueConfirmed:e.onValueConfirmed}})],1)})),e.actionsRowEnd.list.length?n("th",{staticClass:"tr-th-action"},[n("Actions",{attrs:{row:null,actions:e.actionsRowEnd}})],1):e._e()],2)}),u=[],f=n("2ef0"),m=n.n(f),h=n("f781"),p=n("8c2d"),g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.actions.list.length>0?n("div",{staticClass:"actions-holder"},e._l(e.actions.list,(function(t){return n("div",{key:t.name+t.icon,staticClass:"btn btn-sm btn-info text-nowrap dynamicforms-actioncontrol button",on:{click:function(n){return n.stopPropagation(),e.actions.exec(n,t,e.row)}}},[n("IonIcon",{staticClass:"d-inline-block",attrs:{name:t.icon}}),n("span",{staticClass:"d-none d-md-inline-block"},[e._v(e._s(t.label))])],1)})),0):e._e()},b=[],_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.loaded_svg?n("div",{key:e.loaded_svg,domProps:{innerHTML:e._s(e.loaded_svg)}}):e._e()},w=[],v=n("cbde"),y={name:"ionicon",props:["name"],data:function(){return{loaded_svg:""}},computed:{},mounted:function(){var e=this,t=e.name;if(window.cache_ionicon||(window.cache_ionicon={}),t)if(window.cache_ionicon[t]){if("function"===typeof window.cache_ionicon[t].then)return window.cache_ionicon[t].then((function(t){e.loaded_svg=t.data})),void(e.loaded_svg="&hellip;");e.loaded_svg=window.cache_ionicon[t]}else e.loaded_svg="&hellip;",window.cache_ionicon[t]=v["a"].get("https://unpkg.com/ionicons@5.5.1/dist/svg/".concat(t,".svg")),window.cache_ionicon[t].then((function(n){e.loaded_svg=window.cache_ionicon[t]=n.data.replace(/<title>.*<\/title>/i,"")}));else Object(f["noop"])()},methods:{}},x=y,C=(n("e4d7"),n("2877")),k=Object(C["a"])(x,_,w,!1,null,null,null),O=k.exports,D={name:"actions",props:["row","actions"],components:{IonIcon:O}},T=D,E=(n("5129"),Object(C["a"])(T,g,b,!1,null,"53f5451e",null)),j=E.exports,L=n("d4ec"),R=n("bee2"),S=(n("07ac"),n("13d5"),n("c950")),$=function(){function e(t,n,a){Object(L["a"])(this,e),this.actions=t,this.showModal=n,this.tableUuid=a,this.filterCache={}}return Object(R["a"])(e,[{key:"list",get:function(){return Object.values(this.actions)}},{key:"filter",value:function(t,n){var a=this,i=t+(n?"|".concat(n):"");return void 0===this.filterCache[i]&&(this.filterCache[i]=new e(Object.values(this.actions).filter((function(e){return e.position===t&&(null===e.field_name||e.field_name===n)})).reduce((function(e,t){return e[t.name]=a.actions[t.name],e}),{}),this.showModal,this.tableUuid)),this.filterCache[i]}},{key:"exec",value:function(e,t,n){S["a"].$emit("tableActionExecuted_".concat(this.tableUuid),{event:e,action:t,data:n})}}]),e}(),q=$,I={name:"dftablefilterrow",props:["configuration"],data:function(){return{filter:{},actionsRowEnd:new q(this.configuration.actions,null,this.configuration.uuid).filter("FILTER_ROW_END"),actionsRowStart:new q(this.configuration.actions,null,this.configuration.uuid).filter("FILTER_ROW_START")}},computed:{columns:function(){return m.a.filter(this.configuration.columns,(function(e){return e.visibility.table===p["a"].FULL&&e.visibility.form===p["a"].FULL}))}},methods:{onValueConfirmed:function(e){this.$emit("setTableFilter",{filter:this.filter,doFilter:e})}},components:{dfformcolumn:h["a"],Actions:j}},A=I,H=(n("92a7"),Object(C["a"])(A,c,u,!1,null,"312bd62f",null)),F=H.exports,P={name:"dftablehead",props:{columns:{type:Array,required:!0},filter:{type:Object}},computed:{numSortedCols:function(){return this.columns.filter((function(e){return e.ordering.includes("seg-")})).length}},methods:{setTableFilter:function(e){this.$emit("setTableFilter",e)},colClicked:function(e,t,n){if(t.isOrdered)if(e.altKey);else if(e.ctrlKey&&e.shiftKey)t.setSorted("unsorted");else if(e.ctrlKey)this.$parent.$parent.changeOrder(n,t.isDescending?"desc":"asc",1);else{var a=t.orderIndex,i=e.shiftKey?0===a?this.numSortedCols+1:a:1,r=e.shiftKey?this.column.isAscending?"desc":"asc":t.cycleOrdering;this.$parent.$parent.changeOrder(n,r,i,!e.shiftKey)}}},components:{dftablefilterrow:F}},N=P,U=(n("5951"),Object(C["a"])(N,l,d,!1,null,"34653f70",null)),V=U.exports,B=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("tbody",e._l(e.rows,(function(t){return n("tr",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:e.rows.getVisibilityHandler(t.id),expression:"rows.getVisibilityHandler(row.id)"}],key:t.id,style:t.df_control_data.row_css_style,attrs:{"data-id":t.id},on:{click:function(n){return e.rowClick(n,"ROW_CLICK",t)},mouseup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"right",39,t.key,["Right","ArrowRight"])||"button"in t&&2!==t.button?null:e.rowClick(t,"ROW_RIGHTCLICK")}}},e._l(e.columns,(function(a){return n("td",{key:a.name,attrs:{"data-name":a.name}},[n("Actions",{attrs:{row:t,actions:e.actions.filter("FIELD_START",a.name)}}),a.renderDecoratorComponentName?n(a.renderDecoratorComponentName,{tag:"component",attrs:{row:t,column:a,value:t[a.name],"body-id":e.$parent._uid}}):["#actions-row_start","#actions-row_end"].includes(a.name)?n("Actions",{attrs:{row:t,actions:e.actions.filter(a.name.substr(9).toUpperCase())}}):n("div",{staticStyle:{display:"inline-block"},domProps:{innerHTML:e._s(a.renderDecoratorFunction(t,a,t[a.name]))}}),n("Actions",{attrs:{row:t,actions:e.actions.filter("FIELD_END",a.name)}})],1)})),0)})),0)},M=[],z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{display:"inline-block"},domProps:{innerHTML:e._s(e.displayValue)}})},W=[],K=(n("c975"),n("a15b"),n("a026")),J={name:"dftablecellfloat",props:["row","column","value","bodyId"],computed:{displayValue:function(){if(null==this.value)return"";["dynamicforms","df-tablecell-float-configs"].reduce((function(e,t){return e[t]||(e[t]={})}),window);var e=window.dynamicforms["df-tablecell-float-configs"][this.bodyId];e||(e=K["default"].observable({max_decimals:0,decimal_char:1.1.toLocaleString().substr(1,1)}),window.dynamicforms["df-tablecell-float-configs"][this.bodyId]=e);var t=this.value.toLocaleString(),n=t.indexOf(e.decimal_char),a=-1===n?0:t.substr(n+1).length;a>e.max_decimals&&(e.max_decimals=a),-1===n&&(t+=e.decimal_char);var i=Array(e.max_decimals+1-a).join("0");return this.column.render_params.table_show_zeroes?t+=i:t+=i?'<span style="visibility: hidden">'.concat(i,"</span>"):"",t}}},Q=J,G=Object(C["a"])(Q,z,W,!1,null,"febe2478",null),Y=G.exports,X={name:"dftablebody",props:["columns","rows","loading","actions"],data:function(){return{}},methods:{rowClick:function(e,t,n){var a=this.actions.filter(t);a.list.forEach((function(t){a.exec(e,t,n)}))}},components:{Actions:j,dftablecellfloat:Y}},Z=X,ee=Object(C["a"])(Z,B,M,!1,null,"c23256c0",null),te=ee.exports,ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("tfoot",[0!==e.rows.length||e.loading?e._e():n("tr",{staticClass:"no-data-indicator"},[n("td",{attrs:{colspan:e.columns.length}},[e._v(e._s(e.noDataString))])]),0===e.rows.length&&e.loading?n("tr",{staticClass:"no-data-indicator"},[n("td",{attrs:{colspan:e.columns.length}},[e._m(0)])]):e._e(),n("dftableloadingindicator",{attrs:{loading:e.loading,rows:e.rows,columns:e.columns}})],1)},ae=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"lds-ellipsis"},[n("div"),n("div"),n("div"),n("div")])}],ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.rows.length>0&&e.loading?n("tr",{staticClass:"loading-indicator"},[n("td",{attrs:{colspan:e.columns.length}},[n("dfloadingindicator",{attrs:{loading:"loading"}})],1)]):e._e()},re=[],oe=n("db3f"),se={name:"dftableloadingindicator",components:{Dfloadingindicator:oe["a"]},props:{loading:{type:Boolean,required:!0},columns:{type:Array,required:!0},rows:{type:Array,required:!0}}},le=se,de=(n("e80a"),Object(C["a"])(le,ie,re,!1,null,"5f5422ee",null)),ce=de.exports,ue={name:"dftablefoot",props:["columns","rows","loading","noDataString"],components:{dftableloadingindicator:ce}},fe=ue,me=Object(C["a"])(fe,ne,ae,!1,null,"2193e61e",null),he=me.exports,pe={name:"dftable",props:["configuration"],methods:{setTableFilter:function(e){this.$emit("setTableFilter",e)}},components:{dftablefoot:he,dftablehead:V,dftablebody:te,Actions:j}},ge=pe,be=Object(C["a"])(ge,o,s,!1,null,"6bf1aef8",null),_e=be.exports,we=(n("498a"),n("a9e3"),n("1276"),function(){function e(t){Object(L["a"])(this,e),this._columnDef=t}return Object(R["a"])(e,[{key:"name",get:function(){return this._columnDef.name}},{key:"label",get:function(){return this._columnDef.label}},{key:"align",get:function(){return this._columnDef.alignment}},{key:"table_classes",get:function(){return this._columnDef.table_classes}},{key:"ordering",get:function(){return this._columnDef.ordering}},{key:"visibility",get:function(){switch(this._columnDef.visibility){case 1:return p["a"].SUPPRESS;case 5:return p["a"].HIDDEN;case 8:return p["a"].INVISIBLE;case 10:return p["a"].FULL;default:return console.warn("Table column came with visibility set to ".concat(this._columnDef.visibility,", but we don't know")+" that constant"),p["a"].FULL}}},{key:"isOrdered",get:function(){return this.ordering.includes("ordering")}},{key:"th_classes",get:function(){return"".concat(this.table_classes," ").concat(this.isOrdered?"ordering":"").trim()}},{key:"isAscending",get:function(){return this.isOrdered&&this.ordering.includes("asc")}},{key:"isDescending",get:function(){return this.isOrdered&&this.ordering.includes("desc")}},{key:"isUnsorted",get:function(){return this.isOrdered&&this.ordering.includes("unsorted")}},{key:"cycleOrdering",get:function(){return this.isAscending?"desc":this.isDescending?"unsorted":"asc"}},{key:"setSorted",value:function(e,t){void 0===t&&(t=this.orderIndex>0?this.orderIndex:1),this.isOrdered?"asc"===e||"desc"===e||"unsorted"===e?this._columnDef.ordering="ordering ".concat(e," ").concat("unsorted"===e?"":"seg-".concat(t)):console.warn('unknown sort direction "'.concat(e,'" for the column ').concat(this.name,". not doing anything")):console.warn("column $(this.name) is not orderable. Why are you trying to set its order direction?")}},{key:"ascDescChar",get:function(){return this.isOrdered?this.isAscending?"▲":this.isDescending?"▼":this.isUnsorted?"↕":"":""}},{key:"orderIndex",get:function(){if(!this.isOrdered)return 0;var e=/(?:seg-)(\d+)/.exec(this.ordering);return null!=e?Number(e[1]):0}},{key:"orderIndexChar",get:function(){return this.orderIndex>0?String.fromCharCode(9312+this.orderIndex-1):""}},{key:"render_params",get:function(){return this._columnDef.render_params||{}}},{key:"renderDecoratorComponentName",get:function(){if(this.render_params.table){var e=this.render_params.table,t="#"===e.substr(0,1)?e.substr(1):"";return t.replace(/-/g,"")}return null}},{key:"renderDecoratorFunction",get:function(){if(this.render_params&&this.render_params.table){var e=this.render_params.table;if("df-tablecell-"!==e.substr(0,13))return e.split(".").reduce((function(e,t){return e[t]}),window);var t=e.substr(13);switch(t){case"bool":return function(e,t,n){return"<code>".concat(n,"</code>")};case"link":return function(e,t,n){return'<a href="'.concat(n,'">').concat(n,"</a>")};case"email":return function(e,t,n){var a=n.includes("<")?n.substr(0,n.indexOf("<")).trim():n;return'<a href="mailto:'.concat(n,'">').concat(a,"</a>")};case"ipaddr":return function(e,t,n){var a=n.split(".");return 4===a.length&&(n=a.map((function(e){var t=e.length<3?'<span style="opacity: .5">'.concat("000".slice(e.length-3),"</span>"):"";return t+e})).join(".")),"<code>".concat(n,"</code>")}}}return function(e,t,n){return n}}}]),e}()),ve=we,ye=n("1157"),xe=n.n(ye),Ce={methods:{executeTableAction:function(e,t,n){var a=this;if(m.a.size(e))if("delete"===e.name)v["a"].delete(this.detail_url.replace("--record_id--",t.id)).then((function(){a.processedConfiguration.rows.deleteRow(t.id)}));else if(["edit","add"].includes(e.name))this.showModal(e,t);else if("submit"===e.name){var i,r;t.id?(i=t.id,r=v["a"].put):(i="new",r=v["a"].post),r(this.detail_url.replace("--record_id--",i),t,{headers:{"x-viewmode":"TABLE_ROW","x-pagination":1,"x-df-component-def":!0}}).then((function(e){n&&n.hide(),a.processedConfiguration.rows.updateRows([e.data])})).catch((function(e){var t={},a="formEvents_".concat(n.currentDialog.body.data.uuid);400===e.response.status?m.a.forOwn(e.response.data,(function(e,n){t["".concat(n)]=m.a.join(e,"\n")})):t.non_field_errors=e.response.data.detail,S["a"].$emit(a,{type:"submitErrors",data:t})}))}else"cancel"===e.name?n&&n.hide():"filter"===e.name&&this.loadData()}}},ke=Ce,Oe=n("cf2c");n("a434");function De(e,t){var n=null,a=null;t&&t.length&&(n=t[0].id,a=t[t.length-1].id),e.getVisibilityHandler=function(t){return(n===t||a===t)&&{callback:e.loadMoreRows,once:!0}}}function Te(e){return e.reduce((function(e,t,n){return e[t.id]=n,e}),{})}function Ee(e){return function(t,n){var a=n||Te(e);t.map((function(t){var n=a[t.id];return null!=n?e[n]=t:e.push(t),null}))}}function je(e){return function(t,n){var a=n||Te(e);e.splice(a[t],1)}}function Le(e,t){return function(n){n&&(e.loading=!0,v["a"].get(e.rows.next,{headers:{"x-viewmode":"TABLE_ROW","x-pagination":1}}).then((function(n){var a=Te(e.rows.results);t.updateRows(n.data.results,a),e.rows.next=n.data.next,De(t,n.data.results.length&&n.data.next?n.data.results:null)})).catch((function(e){console.error(e)})).finally((function(){e.loading=!1})))}}var Re=function(e,t){var n=[],a=null;return t&&t.results&&t.results.constructor===Array&&(n=t.results,a=t.next),De(n,n.length&&a?n:null),n.loadMoreRows=Le(e,n),n.updateRows=Ee(e.rows.results),n.deleteRow=je(e.rows.results),n},Se=Re,$e={name:"dftable",mixins:[ke],props:{config:{type:Object,required:!1}},data:function(){var e=this.config||this.$parent;return{loading:!1,rows:e.rows,columns:m.a.filter(e.columns,(function(e){return p["a"].FULL===e.visibility.table})),titles:e.titles,actions:e.actions,uuid:e.uuid,list_url:e.list_url,detail_url:e.detail_url,editingRowURL:e.editingRowURL,editDialogTitle:e.editDialogTitle,filter:e.filter,filterQueryString:"",ordering_parameter:e.ordering_parameter,ordering_style:e.ordering_style}},beforeDestroy:function(){S["a"].$off("tableActionExecuted_".concat(this.uuid))},mounted:function(){var e=this,t="";this.columns.forEach((function(n,a){t+="#list-".concat(e.uuid," tbody tr td:nth-child(").concat(a+1,") {\n            text-align: ").concat(n.alignment,";\n          }\n          ")}));var n=document.createElement("style");n.appendChild(document.createTextNode(t)),document.head.appendChild(n),S["a"].$on("tableActionExecuted_".concat(this.uuid),this.tableAction)},computed:{processedConfiguration:function(){return{rows:this.loadableRows(this.rows),columns:this.columns.map((function(e){return new ve(e)})),actions:new q(this.actions,this.showModal,this.uuid),loading:this.loading,noDataString:"No data",editDialogTitle:"Test dialog",editingRowURL:"",titles:this.titles,filter:this.filter}},component:function(){return window.dynamicformsUi},sortedColumns:function(){return this.processedConfiguration.columns.filter((function(e){return e.isOrdered&&!e.isUnsorted})).map((function(e){return{fieldName:e.name,direction:e.isAscending,index:e.orderIndex}})).sort((function(e,t){return e.index-t.index}))},orderingParam:function(){var e=Oe["a"].getObjectFromPath(this.ordering_style);return e?e(this.sortedColumns):this.sortedColumns.map((function(e){return(!0===e.direction?"":"-")+e.fieldName}))}},methods:{changeOrder:function(e,t,n,a){var i=this.processedConfiguration.columns[e].orderIndex!==n;this.processedConfiguration.columns.forEach((function(r,o){o===e?r.setSorted(t,n):r.orderIndex>0&&(a?r.setSorted("unsorted"):i&&r.orderIndex>=n&&r.setSorted(r.isAscending?"asc":"desc",r.orderIndex+1))}))},loadData:function(){var e=this;this.loading=!0,window.setTimeout((function(){}),250);var t="".concat(this.list_url,"?").concat(this.ordering_parameter,"=").concat(this.orderingParam);m.a.size(this.filterQueryString)&&(t+="&".concat(this.filterQueryString)),v["a"].get(t,{headers:{"x-viewmode":"TABLE_ROW","x-pagination":1}}).then((function(t){e.rows=t.data})).catch((function(e){console.error(e)})).finally((function(){e.loading=!1}))},loadableRows:function(e){return Se(this,e)},showModal:function(e,t){"edit"===e.name?(this.editDialogTitle="".concat(this.titles.edit," ").concat(t.id),this.editingRowURL=this.detail_url.replace("--record_id--",t.id).replace(".json",".component"),Oe["a"].dialog.fromURL(this.editingRowURL,e.name,this.uuid)):"add"===e.name?(this.editDialogTitle=this.titles.add,this.editingRowURL=this.detail_url.replace("--record_id--","new").replace(".json",".component"),Oe["a"].dialog.fromURL(this.editingRowURL,null,this.uuid)):(this.editDialogTitle="unknown action ".concat(e.name,"... so, a stupid title"),this.editingRowURL="")},setTableFilter:function(e){console.log(e),this.filterQueryString=xe.a.param(m.a.pickBy(m.a.clone(e.filter),(function(e){return m.a.isString(e)?m.a.size(e):null!==e&&void 0!==e}))),e.doFilter&&this.loadData()},tableAction:function(e){if(["add","edit","delete","filter","submit","cancel"].includes(e.action.name))this.executeTableAction(e.action,e.data,e.modal);else{var t=Oe["a"].getObjectFromPath(e.action.action.func_name);if(t){var n={};try{n=e.action.action.params}catch(i){}var a=Object(r["a"])({context:this},e);n?t.apply(n,[a]):t(a)}}}},watch:{orderingParam:function(e,t){m.a.isEqual(e,t)||this.loadData()}},components:{bootstraptable:_e}},qe=$e,Ie=Object(C["a"])(qe,a,i,!1,null,"22c33d03",null);t["a"]=Ie.exports}});
//# sourceMappingURL=df-components.js.map