(function(e){function t(t){for(var a,o,s=t[0],l=t[1],d=t[2],u=0,f=[];u<s.length;u++)o=s[u],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&f.push(r[o][0]),r[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);c&&c(t);while(f.length)f.shift()();return i.push.apply(i,d||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,s=1;s<n.length;s++){var l=n[s];0!==r[l]&&(a=!1)}a&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},r={app:0},i=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var d=0;d<s.length;d++)t(s[d]);var c=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"06dc":function(e,t,n){},"099a":function(e,t,n){},"17a6":function(e,t,n){},"17db":function(e,t,n){"use strict";n("67a4")},4678:function(e,t,n){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function r(e){var t=i(e);return n(t)}function i(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=i,e.exports=r,r.id="4678"},4703:function(e,t,n){},"4e23":function(e,t,n){"use strict";n("099a")},"56d7":function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"createModal",(function(){return m})),n.d(t,"createApp",(function(){return p}));n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("bc3a"),r=n.n(a),i=n("1157"),o=n.n(i),s=n("a026"),l=n("85fe"),d=n("fdf9"),c=n("a3b6"),u=n("cf2c"),f=n("8be3");s["default"].config.productionTip=!1,s["default"].use(l["a"]),s["default"].component(d["a"].name,d["a"]),s["default"].component(f["a"].name,f["a"]),s["default"].component(c["a"].name,c["a"]);var m=function(e){return new s["default"]({el:"#".concat(e),components:{ModalHandler:c["a"]},template:"<ModalHandler></ModalHandler>"})},h=function(e,t){r.a.get(e,{headers:{"x-viewmode":"TABLE_ROW","x-pagination":1,"x-df-component-def":!0}}).then((function(e){t(e.data)})).catch((function(e){alert(e.data)}))},p=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return"undefined"===typeof window.dynamicforms&&(window.dynamicforms={}),!u["a"].dialog&&a&&m(a),new s["default"]({el:"#".concat(e),components:{DFTable:d["a"],Example:f["a"]},data:function(){return n},template:t})};window.$=o.a,window.$,window.createApp=p,window.getComponentDef=h}.call(this,n("1157"))},"67a4":function(e,t,n){},"6deb":function(e,t,n){"use strict";var a=n("5530"),r=(n("d3b7"),n("caad"),n("fb6a"),n("ac1f"),n("5319"),n("a15b"),n("2ef0")),i=n.n(r),o=n("cbde"),s=n("cf2c"),l=n("c950"),d=void 0,c=function(e){var t,n=function(t){e.then&&e.then(t)},a=function(t){e.catch&&e.catch(t)},r=function(){e.finally&&e.finally()};t=["put","post","patch"].includes(e.method)?[e.url,e.data,e.config]:[e.url,e.config],o["a"][e.method].apply(d,t).then((function(e){n(e)})).catch((function(e){a(e)})).finally((function(){r()}))},u={computed:{defaultSubmitHeaders:function(){return{"x-viewmode":"TABLE_ROW","x-pagination":1,"x-df-component-def":!0}}},mounted:function(){l["a"].$on("tableActionExecuted_".concat(this.uuid),this.tableAction)},beforeDestroy:function(){l["a"].$off("tableActionExecuted_".concat(this.uuid))},methods:{tableAction:function(e){if(void 0!==e.action&&i.a.size(e.action)){var t=e.action?e.action.action:null,n=e.action.name,r=n.charAt(0).toUpperCase()+n.slice(1),o="action".concat(r,"Execute"),l=this[o]instanceof Function?this[o]:null;switch(n){case"add":this.actionAddExecute(e.action,e.data,e.modal,{},e.promise);break;case"edit":this.actionEditExecute(e.action,e.data,e.modal,{},e.promise);break;case"delete":this.actionDeleteExecute(e.action,e.data,e.modal,{},e.promise);break;case"filter":this.actionFilterExecute(e.action,e.data,e.modal,{},e.promise);break;case"submit":this.actionSubmitExecute(e.action,e.data,e.modal,{},e.promise);break;case"cancel":this.actionCancelExecute(e.action,e.data,e.modal,{},e.promise);break;default:if(null!=l)l.apply(this,[e.action,e.data,e.modal,{},e.promise]);else{if(null===t)return;if(t.href);else{var d=s["a"].getObjectFromPath(e.action.action.func_name);if(d){var c={};try{c=e.action.action.params}catch(f){}var u=Object(a["a"])({context:this},e);c?d.apply(c,[u]):d(u)}}}}}},actionAddExecute:function(e,t,n,a,r){this.showModal(e,t)},actionEditExecute:function(e,t,n,a,r){this.showModal(e,t)},actionDeleteExecute:function(e,t,n,a,r){var i=this,o=a&&a.detailUrl?a.detailUrl:this.detail_url.replace("--record_id--",t.id);c({method:"delete",url:o,then:a.then||function(){i&&i.processedConfiguration&&i.processedConfiguration.rows.deleteRow(t.id)}})},actionSubmitExecute:function(e,t,n,a,r){var o,s;t.id?(o=t.id,s="put"):(o="new",s="post"),s=a.submitMethod||s,r&&(r.resolveData={action:e,data:t,params:a});var d=a&&a.detailUrl?a.detailUrl:this.detail_url.replace("--record_id--",o),u=(a?a.headers:null)||this.defaultSubmitHeaders,f=this;c({method:s,url:d,data:t,config:{headers:u},then:a.then||function(t){r&&(r.resolveData={action:e,data:t.data,params:a}),n&&n.hide(),f&&f.processedConfiguration&&f.processedConfiguration.rows.updateRowFromForm(t.data)},catch:a.catch||function(e){var t={},a="formEvents_".concat(n.currentDialog.body.uuid);400===e.response.status?i.a.forOwn(e.response.data,(function(e,n){t["".concat(n)]=i.a.join(e,"\n")})):t.non_field_errors=e.response.data.detail,l["a"].$emit(a,{type:"submitErrors",data:t})}})},actionCancelExecute:function(e,t,n,a,r){r&&(r.resolveData={action:e,data:t,params:a}),n&&n.hide()},actionFilterExecute:function(e,t,n,a,r){this.loadData()}}};t["a"]=u},"6fd8":function(e,t,n){"use strict";n("b2f7")},"75fb":function(e,t,n){"use strict";var a={methods:{gettext:function(e){return window.gettext?window.gettext(e):e}}};t["a"]=a},"764b":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.loaded_svg?n("div",{key:e.loaded_svg,domProps:{innerHTML:e._s(e.loaded_svg)}}):e._e()},r=[],i=(n("ac1f"),n("5319"),n("c975"),n("2ef0")),o=n("cbde"),s={name:"IonIcon",props:{name:{type:String,required:!1,default:null}},data:function(){return{loaded_svg:""}},watch:{name:function(){this.loaded_svg="",this.loadSVG()}},mounted:function(){this.loadSVG()},methods:{loadSVG:function(){var e=this,t=this.name;if(window.cache_ionicon||(window.cache_ionicon={}),t)if(window.cache_ionicon[t]){if("function"===typeof window.cache_ionicon[t].then)return window.cache_ionicon[t].then((function(t){e.loaded_svg=t.data.replace(/<title>.*<\/title>/i,"")})),void(this.loaded_svg="&hellip;");this.loaded_svg=window.cache_ionicon[t]}else{this.loaded_svg="&hellip;";var n=t.indexOf("/")>-1?t:"https://unpkg.com/ionicons@5.5.1/dist/svg/".concat(t,".svg");window.cache_ionicon[t]=o["a"].get(n),window.cache_ionicon[t].then((function(n){e.loaded_svg=window.cache_ionicon[t]=n.data.replace(/<title>.*<\/title>/i,"")}))}else Object(i["noop"])()}}},l=s,d=(n("e4d7"),n("2877")),c=Object(d["a"])(l,a,r,!1,null,null,null);t["a"]=c.exports},"7a17":function(e,t,n){"use strict";n("b08d")},8411:function(e,t,n){"use strict";n("f3b7")},"8be3":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{attrs:{id:"titlebar"}},[n("div",{attrs:{id:"hamburger"},on:{click:function(t){t.stopPropagation(),e.menuShown=!e.menuShown}}},[e._v(" ☰ "),n("span",{attrs:{id:"page-title"}},[e._v(e._s(e.title))])])]),n("transition",{attrs:{name:"fade"}},[e.menuShown?n("div",{staticClass:"sidenav-group"},[n("div",{attrs:{id:"sidenav-overlay"},on:{click:function(t){t.stopPropagation(),e.menuShown=!e.menuShown}}}),n("div",{staticClass:"sidenav",attrs:{id:"side-nav"}},[n("router-link",{attrs:{to:"/validated"}},[e._v("Validated")]),n("router-link",{attrs:{to:"/hidden-fields"}},[e._v("Hidden fields")]),n("router-link",{attrs:{to:"/basic-fields"}},[e._v("Basic fields")]),n("router-link",{attrs:{to:"/advanced-fields"}},[e._v("Advanced fields")]),n("router-link",{attrs:{to:"/page-load"}},[e._v("Page loading")]),n("router-link",{attrs:{to:"/filter"}},[e._v("Filter")]),n("a",{attrs:{href:"#"},on:{click:function(t){return t.stopPropagation(),e.showSingleDialog.apply(null,arguments)}}},[e._v("Pop-up dialog")]),n("a",{attrs:{href:"#",onclick:"singleDialog()"}},[e._v("Choice allow tags dialog")]),n("router-link",{attrs:{to:"/refresh-types"}},[e._v("Refresh types")]),n("router-link",{attrs:{to:"/calculated-css-class-for-table-row"}},[e._v("Row css style")]),n("router-link",{attrs:{to:"/choice-allow-tags-fields"}},[e._v("Tag select fields")]),n("router-link",{attrs:{to:"/calendar"}},[e._v("Calendar example")]),n("router-link",{attrs:{to:"/documents"}},[e._v("Documents")])],1)]):e._e()]),n("div",{attrs:{id:"main"}},[n("router-view",{on:{"title-change":function(t){e.title=t},"load-route":e.loadRoute}})],1)],1)},r=[],i=(n("ac1f"),n("00b4"),n("c975"),n("5319"),n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),n("9861"),n("a026")),o=n("8c4f"),s=n("cbde"),l=n("cf2c"),d=n("c950"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("FullCalendar",{attrs:{options:e.calendarOptions}})],1)},u=[],f=n("1da1"),m=(n("96cf"),n("99af"),n("4d90"),n("5574"),n("3cdd")),h=n("a20c"),p=n("e44e"),b=n("ccb5"),g=n("28dd"),v=n("3e32"),y=n("f5ff"),_=n("c956"),w=n.n(_),x=n("6deb"),j={name:"Calendar",components:{FullCalendar:y["a"]},mixins:[x["a"]],emits:["title-change"],data:function(){return{uuid:"calendar_entry",sunriseTime:"8:00",sunsetTime:"16:00",url:"/calendar-event"}},computed:{defaultSubmitHeaders:function(){return{"x-viewmode":"FORM"}},detail_url:function(){return"".concat(this.url,"/--record_id--.json")},calendarOptions:function(){return{plugins:[m["b"],p["a"],b["a"],g["a"],v["a"],h["a"]],headerToolbar:{left:"prev,next today",center:"title",right:"listWeek,timeGridDay,timeGridWeek,dayGridMonth"},dayHeaderFormat:"ddd DD.MMM",titleFormat:"ddd DD.MMM yyyy",height:"auto",slotLabelFormat:"HH:mm",eventStartEditable:!0,eventDurationEditable:!0,selectable:!0,selectMirror:!0,selectOverlap:!1,selectAllow:function(e){return e.start.getDate()===e.end.getDate()&&e.start.getHours()>=7&&(e.end.getHours()<21||21===e.end.getHours()&&0===e.end.getMinutes())},allDaySlot:!1,eventResize:this.resizeReservation,eventDrop:this.resizeReservation,initialView:"timeGridWeek",editable:!0,dayMaxEvents:!0,eventOverlap:!1,eventClick:this.editReservation,select:this.addReservation,events:"".concat(this.url,".json"),eventDataTransform:this.eventDataTransform,eventTimeFormat:"HH:mm",timeZone:"Europe/Ljubljana",slotMinTime:"06:00",slotMaxTime:"22:00",businessHours:{daysOfWeek:[0,1,2,3,4,5,6],startTime:this.sunriseTime,endTime:this.sunsetTime},firstDay:1,eventConstraint:"businessHours",datesSet:this.recalculateSun}}},mounted:function(){this.$emit("title-change",window.gettext("Calendar example"))},methods:{recalculateSun:function(e){var t=w.a.getTimes(e.start,46.05,-14.5),n=new Date(t.sunrise.valueOf()-18e5),a=new Date(t.sunset.valueOf()+18e5);this.sunriseTime="".concat(n.getHours(),":").concat(String(n.getMinutes()).padStart(2,"0")),this.sunsetTime="".concat(a.getHours(),":").concat(String(a.getMinutes()).padStart(2,"0"))},eventDataTransform:function(e){return{id:e.id,start:e.start_at,end:e.end_at,title:e.title}},addReservation:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function n(){var a,r,i,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=encodeURIComponent(e.startStr),r=encodeURIComponent(e.endStr),n.next=4,l["a"].dialog.fromURL("".concat(t.url,"/new.componentdef?start_at=").concat(a,"&end_at=").concat(r),"new",t.uuid);case 4:i=n.sent,o=t.eventDataTransform(i.data),e.view.calendar.addEvent(o,!0),console.log([o,o.start,i]);case 8:case"end":return n.stop()}}),n)})))()},editReservation:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.event.id,n.next=3,l["a"].dialog.fromURL("".concat(t.url,"/").concat(a,".componentdef"),"edit",t.uuid);case 3:r=n.sent,n.t0=r&&r.action?r.action.name:null,n.next="delete_dlg"===n.t0?7:"submit"===n.t0?9:12;break;case 7:return e.event.remove(),n.abrupt("break",13);case 9:return e.event.setDates(r.data.start_at,r.data.end_at),e.event.setProp("title",r.data.title),n.abrupt("break",13);case 12:console.log(r);case 13:case"end":return n.stop()}}),n)})))()},actionDelete_dlgExecute:function(e,t,n,a,r){r&&(r.resolveData={action:e,data:t,params:a}),this.actionDeleteExecute(e,t,n,a,r),n&&n.hide()},resizeReservation:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=t.detail_url.replace("--record_id--",e.event.id),n.prev=1,n.next=4,s["a"].patch(a,{id:e.event.id,start_at:e.event.startStr,end_at:e.event.endStr});case 4:n.next=9;break;case 6:n.prev=6,n.t0=n["catch"](1),e.revert();case 9:case"end":return n.stop()}}),n,null,[[1,6]])})))()}}},D=j,F=n("2877"),k=Object(F["a"])(D,c,u,!1,null,"524c9fe4",null),C=k.exports,O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("DFFormLayout",{attrs:{rows:e.rows,uuid:e.uuid,record:e.record},on:{"unit-changed":e.unitChanged,"note-changed":e.noteChanged}})],1)},T=[],L=(n("159b"),n("caad"),n("b6bd")),E=n("8c2d"),S={name:"ExampleHiddenLayout",components:{DFFormLayout:L["default"]},props:{rows:{type:Array,required:!0},uuid:{type:String,required:!0},record:{type:Object,required:!0}},computed:{fields:function(){var e={};return this.rows.forEach((function(t){t.columns.forEach((function(t){e[t.field.name]=t.field}))})),e},unitVisible:function(){return this.fields.unit.visibility.form===E["a"].FULL}},mounted:function(){this.unitChanged({newRec:this.record})},methods:{noteChanged:function(e){this.fields.unit.visibility.form="abc"===e.newRec.note?E["a"].HIDDEN:E["a"].FULL,this.unitChanged(e)},unitChanged:function(e){var t=e.newRec,n=function(e,t){e.visibility.form=t?E["a"].FULL:E["a"].HIDDEN};n(this.fields.int_fld,this.unitVisible&&["pcs","cst"].includes(t.unit)),n(this.fields.qty_fld,this.unitVisible&&"wt"===t.unit),n(this.fields.cst_fld,this.unitVisible&&"cst"===t.unit)}}},R=S,I=Object(F["a"])(R,O,T,!1,null,null,null),q=I.exports,H=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.config?n(e.component,{key:e.config.uuid,tag:"div",attrs:{config:e.config}}):e._e()},$=[],A=n("fdf9"),P={name:"PageLoader",components:{DFTable:A["a"],DFFormLayout:L["default"]},emits:["title-change","load-route"],data:function(){return{url:null,component:"DFTable",config:null}},watch:{$route:function(e){this.goToRoute(e)}},mounted:function(){this.goToRoute(this.$route)},methods:{goToRoute:function(e){var t=this,n=e.meta.componentDef?e.meta.componentDef:e.path;this.url="".concat(n,".componentdef"),this.component=e.meta.component||"DFTable",s["a"].get(this.url,{headers:{"x-viewmode":"TABLE_ROW","x-pagination":1}}).then((function(n){t.config=n.data,t.$emit("title-change",n.data.titles.table),t.$emit("load-route",e.path,n.data.uuid)})).catch((function(e){console.log(e),alert("Error retrieving component def:\n".concat(e.data))}))}}},M=P,U=Object(F["a"])(M,H,$,!1,null,null,null),V=U.exports,B=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("p",{attrs:{id:"single_dialog_instructions"}},[e._v(" This dialog's form is pre-populated with data of your (the programmer) choosing. When you make your choice and send it back to the server, the server will process the result and return it back to the client. ")]),e._m(0),n("DFFormLayout",{attrs:{rows:e.rows,uuid:e.uuid,record:e.record}})],1)},N=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{attrs:{id:"single_dialog_instructions_list"}},[e._v(" It is up to you to choose how the data is going to be returned: "),n("li",[e._v('Click "Say it" to have it returned as JSON and displayed in a dialog')]),n("li",[e._v('Click "Download it" to have it returned as a downloadable text file')])])}],W={name:"examples-single_dialog.html",components:{DFFormLayout:L["default"]},props:{rows:{type:Array,required:!0},uuid:{type:String,required:!0},record:{type:Object,required:!0}}},z=W,K=Object(F["a"])(z,B,N,!1,null,null,null),G=K.exports;i["default"].use(o["a"]),i["default"].component(G.name,G),i["default"].component(q.name,q),i["default"].component(C.name,C);var J="fake-uuid-654654-634565",Q=[{path:"/validated",component:V},{path:"/hidden-fields",component:V},{path:"/basic-fields",component:V},{path:"/advanced-fields",component:V},{path:"/page-load",component:V},{path:"/filter",component:V},{path:"/refresh-types",component:V},{path:"/calculated-css-class-for-table-row",component:V},{path:"/single-dialog/:id",component:V,meta:{component:"dialog",uuid:J}},{path:"/choice-allow-tags-fields",component:V},{path:"/calendar",component:C},{path:"/documents",component:V}],Y=new o["a"]({routes:Q}),X={name:"Example",components:{},router:Y,data:function(){return{menuShown:!1,title:"",currentFormUUID:null}},mounted:function(){"/"===Y.history.current.path&&Y.push("/validated"),d["a"].$on("tableActionExecuted_".concat(J),this.singleDialogBtnClick),d["a"].$on("showingRESTForm",this.showingRESTForm)},beforeDestroy:function(){d["a"].$off("showingRESTForm"),d["a"].$off("tableActionExecuted_".concat(J))},methods:{showSingleDialog:function(){this.menuShown=!this.menuShown,l["a"].dialog.fromURL("/single-dialog/new.component","new",J)},loadRoute:function(e,t){d["a"].$off("fieldValueChanged".concat(this.currentFormUUID)),this.currentFormUUID=t,d["a"].$on("fieldValueChanged".concat(this.currentFormUUID),this.fieldValueChanged)},singleDialogBtnClick:function(e){"say_it"===e.action.name?s["a"].post("/single-dialog.json",e.data).then((function(t){alert(t.data.test),e.modal.hide()})):"download"===e.action.name?(e.data.download="1",s["a"].post("/single-dialog.json",e.data).then((function(t){var n="",a=t.headers["Content-Disposition"];if(a&&-1!==a.indexOf("attachment")){var r=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/,i=r.exec(a);null!=i&&i[1]&&(n=i[1].replace(/['"]/g,""))}var o=window.URL.createObjectURL(new Blob([t.data])),s=document.createElement("a");s.href=o,s.setAttribute("download",n),s.innerHTML=n,document.body.appendChild(s),s.click(),e.modal.hide()}))):"cancel"===e.action.name&&e.modal.hide()},fieldValueChanged:function(e){console.log("FieldValueChanged",e)},showingRESTForm:function(e){e.tableUUID===this.currentFormUUID&&d["a"].$on("fieldValueChanged".concat(e.formUUID),this.fieldValueChanged)}}},Z=X,ee=(n("d041"),Object(F["a"])(Z,a,r,!1,null,"16a5126a",null));t["a"]=ee.exports},"8c2d":function(e,t,n){"use strict";n("dca8");t["a"]=Object.freeze({SUPPRESS:1,HIDDEN:5,INVISIBLE:8,FULL:10})},"905a":function(e,t,n){"use strict";n("d182")},9851:function(e,t,n){"use strict";n("06dc")},a3b6:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n(e.component+"Modal",{tag:"component"})],1)},r=[],i=n("cf2c"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:"modal fade "+e.className,attrs:{id:e.uuid,tabindex:"-1",role:"dialog","aria-hidden":"true"}},[n("div",{class:"modal-dialog "+e.sizeClass,attrs:{role:"document"}},[n("div",{staticClass:"modal-content"},[n("div",{class:"modal-header "+e.headerClasses},[n("h5",{staticClass:"modal-title"},[e._v(e._s(e.title))]),e._m(0)]),n("transition",{attrs:{name:"flip",mode:"out-in"}},[e.isComponent?n("div",{key:e.uniqId,staticClass:"modal-body"},[n(e.body.component,e._b({tag:"div"},"div",e.body,!1))],1):n("div",{key:e.uniqId,staticClass:"modal-body",domProps:{innerHTML:e._s(e.body)}})]),n("div",{staticClass:"modal-footer"},e._l(e.buttons,(function(t){return n("button",e._b({key:t.uuid,class:t.classes,attrs:{id:t.element_id||t.uuid,type:"button"},on:{click:function(n){return n.stopPropagation(),e.buttonClick(n,t,e.callback)}}},"button",t.arias,!1),[e._v(" "+e._s(t.label)+" ")])})),0)],1)])])},s=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[n("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])}],l=n("1da1"),d=(n("96cf"),n("caad"),n("d81d"),n("ac1f"),n("1276"),n("c975"),n("a15b"),n("d3b7"),n("b64b"),n("a9e3"),n("99af"),n("13d5"),n("4989"),n("1157")),c=n("cbde"),u=n("c950"),f=n("75fb"),m=n("b6bd"),h=n("db3f"),p={name:"ModalHandler",components:{DFFormLayout:m["default"],DFLoadingIndicator:h["a"]},mixins:[f["a"]],data:function(){return{dialogs:[],initialEventAssignDone:!1,uniqIdCounter:0,inFlightRequests:{}}},computed:{className:function(){return"df-modal-handler"},bootstrapDialog:function(){return".df-modal-handler"},currentDialog:function(){var e=this.dialogs.length?this.dialogs[this.dialogs.length-1]:null;return e&&(e.uniqId=e.uniqId||this.uniqIdCounter++),e},sizeClass:function(){var e=this.currentDialog;return e?e.large||["large","lg","modal-lg"].includes(e.size)?"modal-lg":e.small||["small","sm","modal-sm"].includes(e.size)?"modal-sm":"":"modal-sm"},headerClasses:function(){var e=this.currentDialog;return e&&e.header_classes||""},title:function(){return this.currentDialog?this.currentDialog.title:"No dialogs to show!"},body:function(){return this.currentDialog?this.currentDialog.body:"No dialogs have been invoked"},callback:function(){return this.currentDialog?this.currentDialog.callback:null},uniqId:function(){return this.currentDialog?this.currentDialog.uniqId:null},isComponent:function(){return Boolean(this.currentDialog&&this.currentDialog.body&&this.currentDialog.body.component)},uuid:function(){return this.currentDialog&&this.currentDialog.uuid?"dialog-".concat(this.currentDialog.uuid):"df-modal-handler"},isShowingProgress:function(){return this.currentDialog&&!0===this.currentDialog.isProgress},buttons:function(){var e=this,t=this.currentDialog?this.currentDialog.buttons:null,n=this.currentDialog&&t?t:[{close:"default"}];return n.map((function(t){"default"===t.close?t={label:e.gettext("Close"),classes:"btn btn-secondary",data_return:"close"}:"default"===t.yes?t={label:e.gettext("Yes"),classes:"btn btn-primary",data_return:"yes"}:"default"===t.no&&(t={label:e.gettext("No"),classes:"btn btn-secondary",data_return:"no"}),t.arias=t.arias||{};var n=(t.classes||"").split(" ");return-1===n.indexOf("btn")&&n.push("btn"),t.classes=n.join(" "),t}))}},created:function(){var e=this;i["a"].dialog||(i["a"].dialog=this,window.setInterval((function(){e.progressDialogCheck()}),250))},methods:{show:function(e){var t=this;if(void 0!==e){this.dialogs.push(e);var n={};n.promise=new Promise((function(e,t){n.resolve=e,n.reject=t})),e.promise=n}return this.initialEventAssignDone||(this.initialEventAssignDone=!0,d(this.bootstrapDialog).on("hide.bs.modal",(function(e){var n=null;if(t.dialogs.length){var a=t.dialogs.pop();n=a.callback,a.promise&&a.promise.resolve(a.promise.resolveData||'dialog "'.concat(a.title,'" closed'))}t.dialogs.length&&e.preventDefault(),n&&!0!==n.df_called&&n(null)}))),d(this.bootstrapDialog).modal("show"),this.currentDialog.promise?this.currentDialog.promise.promise:null},hide:function(){d(this.bootstrapDialog).modal("hide")},buttonClick:function(e,t,n){u["a"].$emit("tableActionExecuted_".concat(this.currentDialog.tableUuid),{action:t,data:this.currentDialog.body.record,modal:this,event:e,promise:this.currentDialog.promise}),n&&(n(t.data_return),n.df_called=!0)},message:function(e,t,n){return this.show({title:e,body:t,buttons:[{close:"default"}],callback:n})},yesNo:function(e,t,n){return this.show({title:e,body:t,buttons:[{yes:"default"},{no:"default"}],callback:n})},loading:function(){return Object.keys(this.inFlightRequests).length},oldestInFlight:function(){var e=this.inFlightRequests,t=Object.keys(e);return 0===t.length?{requestId:null,timestamp:null,age:null}:{requestId:t[0],timestamp:e[t[0]],age:(new Date).getTime()-e[t[0]]}},progressDialogCheck:function(){var e=this;this.oldestInFlight().age>=250&&!this.isShowingProgress?this.showProgress():this.oldestInFlight().age>=250&&this.isShowingProgress?c["a"].get("/dynamicforms/progress/",{headers:{"x-df-timestamp":this.oldestInFlight().timestamp}}).then((function(t){e.isShowingProgress&&(e.currentDialog.body.progress=Number(t.data.value),e.currentDialog.body.label=t.data.comment)})).catch((function(e){console.error(e)})):0===this.loading()&&this.isShowingProgress&&this.hide()},showProgress:function(){console.log("Showing progress: We have ".concat(this.loading()," active requests to server oldest is ")+"".concat(this.oldestInFlight().age,"ms old with timestamp ").concat(this.oldestInFlight().timestamp,"."));var e="Performing operation";return this.show({title:e,body:{component:"DFLoadingIndicator",loading:!0,label:null,progress:null,data:!0},buttons:[],callback:null,isProgress:!0})},addRequest:function(e){return this.inFlightRequests[e]=(new Date).getTime(),{sequence:e,timestamp:this.inFlightRequests[e]}},removeRequest:function(e){e&&(delete this.inFlightRequests[e],this.progressDialogCheck())},showComponent:function(e,t,n){var a=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var i,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return i=e.data,o=i.dialog.actions,r.abrupt("return",a.show({uuid:i.uuid,title:i.titles[t||"new"],body:{uuid:i.uuid,rows:i.dialog.rows,record:i.record,component:i.dialog.component_name},buttons:Object.keys(o).reduce((function(e,t){return o[t].data_return={dialog_id:i.uuid,button:o[t]},e.push(o[t]),e}),[]),callback:null,size:i.dialog.size,header_classes:i.dialog.header_classes,tableUuid:n,promise:e.promise}));case 3:case"end":return r.stop()}}),r)})))()},fromURL:function(e,t,n){var a=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,c["a"].get(e,{headers:{"x-viewmode":"FORM"}});case 3:return i=r.sent,u["a"].$emit("showingRESTForm",{tableUUID:n,formUUID:i.data.uuid}),r.abrupt("return",a.showComponent({component:"DFFormLayout",data:i.data},t,n));case 8:throw r.prev=8,r.t0=r["catch"](0),console.error(r.t0),r.t0;case 12:case"end":return r.stop()}}),r,null,[[0,8]])})))()}}},b=p,g=n("2877"),v=Object(g["a"])(b,o,s,!1,null,"53abaf9c",null),y=v.exports,_={name:"ModalHandler",components:{BootstrapModal:y},computed:{component:function(){return i["a"].UI}}},w=_,x=Object(g["a"])(w,a,r,!1,null,"b0a46964",null);t["a"]=x.exports},a963:function(e,t,n){},aa21:function(e,t,n){"use strict";n("bc8d")},ad62:function(e,t,n){"use strict";n("a963")},b08d:function(e,t,n){},b2f7:function(e,t,n){},b6bd:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{attrs:{id:e.uuid}},[e._t("form-error",(function(){return[e.errorText?n("div",{staticClass:"alert alert-danger"},[n("small",{staticClass:"text-danger",attrs:{id:"form-"+e.uuid+"-err"}},[e._v(e._s(e.errorText))])]):e._e()]})),e._l(e.rows,(function(t,a){return n(t.component,{key:a,tag:"DFFormRow",attrs:{columns:t.columns,data:e.record,errors:e.errors}})}))],2)},r=[],i=n("c950"),o=(n("13d5"),n("d3b7"),n("b64b"),n("d81d"),{name:"formFieldChangeMixin",props:{rows:{},uuid:{},record:{default:null}},data:function(){return{}},emits:["fieldValueChanged"],computed:{recordFields:function(){var e=this;return Object.keys(this.record).reduce((function(t,n){return t[n]=e.record[n],t}),{})}},beforeDestroy:function(){},mounted:function(){},watch:{recordFields:{handler:function(e,t){var n=this;Object.keys(this.record).map((function(a){return t[a]!==e[a]&&n.$emit("".concat(a,"-changed"),{formID:n.uuid,newRec:e,oldRec:t,changedField:a}),null}))},deep:!0}}}),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isHiddenSingle?n("DFFormColumn",{attrs:{def:e.writableColumns[0],data:e.data,errors:e.errors}}):n("div",{staticClass:"row align-items-end"},[e._t("before-columns"),e._l(e.writableColumns,(function(t,a){return n("DFFormColumn",{key:a,attrs:{def:t,data:e.data,errors:e.errors}})})),e._t("after-columns")],2)},l=[],d=n("8c2d"),c=n("f781"),u={name:"DFFormRow",components:{DFFormColumn:c["a"]},props:{columns:{type:Array,required:!0},data:{type:Object,required:!0},errors:{type:Object,default:function(){}}},computed:{writableColumns:function(){return this.columns},isHiddenSingle:function(){return 1===this.writableColumns.length&&this.writableColumns[0].field.visibility.form===d["a"].HIDDEN}}},f=u,m=n("2877"),h=Object(m["a"])(f,s,l,!1,null,"306f37ca",null),p=h.exports,b={name:"DFFormLayout",components:{DFFormRow:p},mixins:[o],props:{uuid:{type:String,required:!0},rows:{type:Array,required:!0},record:{type:Object,default:null}},data:function(){return{errors:{}}},computed:{errorText:function(){var e="non_field_errors";try{if(this.errors&&this.errors[e])return this.errors[e]}catch(t){}return""}},mounted:function(){var e=this;i["a"].$on("formEvents_".concat(this.uuid),(function(t){"submitErrors"===t.type&&(e.errors=t.data)}))},beforeDestroy:function(){i["a"].$off("formEvents_".concat(this.uuid))}},g=b,v=Object(m["a"])(g,a,r,!1,null,null,null);t["default"]=v.exports},b9c1:function(e,t,n){"use strict";n("4703")},bc8d:function(e,t,n){},c950:function(e,t,n){"use strict";var a=n("a026"),r=new a["default"];t["a"]=r},cbde:function(e,t,n){"use strict";n("caad"),n("2532"),n("d81d"),n("d3b7"),n("ddb0");var a=n("bc3a"),r=n.n(a),i=n("2ef0"),o=n.n(i),s=n("cf2c"),l=2083,d=r.a.create({xsrfCookieName:"csrftoken",xsrfHeaderName:"X-CSRFToken",withCredentials:!1}),c=0;d.interceptors.request.use((function(e){var t=void 0===e.showProgress||e.showProgress;if(!e.url.includes("/dynamicforms/progress")&&!e.url.includes("unpkg.com")&&t){var n=s["a"].dialog.addRequest(++c);e.sequence=n.sequence,e.headers["x-df-timestamp"]=e.headers["x-df-timestamp"]||n.timestamp}if("get"===o.a.toLower(e.method)&&o.a.size(e.url)>l&&o.a.includes(o.a.map(o.a.keys(e.headers),(function(e){return o.a.toLower(e)})),"x-viewmode")){var a="Your request exceeds maximum length";throw s["a"].dialog.message("error",a),new r.a.Cancel(a)}return e})),d.interceptors.response.use((function(e){return s["a"].dialog.removeRequest(e.config.sequence),e}),(function(e){return s["a"].dialog.removeRequest(e.config.sequence),Promise.reject(e)})),t["a"]=d},cf2c:function(e,t,n){"use strict";n("13d5"),n("d3b7"),n("ac1f"),n("1276");var a={UI:"Bootstrap",getObjectFromPath:function(e){if(e)try{return e.split(".").reduce((function(e,t){return e[t]||{}}),window)}catch(t){console.error(t)}},defaultDatetimeFormat:"dd.MM.yyyy HH:mm:ss"};window.dynamicforms=a,t["a"]=a},d041:function(e,t,n){"use strict";n("e7e7")},d182:function(e,t,n){},db3f:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.loading?n("div",[e.progress?n("div",[n("h3",[e._v(e._s(e.label))]),n("div",{staticClass:"progress progress-striped progress-bar-animated"},[n("div",{staticClass:"progress-bar",style:"width: "+e.progress+"%",attrs:{role:"progressbar","aria-valuemax":"100","aria-valuemin":"0","aria-valuenow":"progress"}},[e._v(" "+e._s(e.progress)+"% ")])])]):n("div",{staticClass:"lds-ellipsis"},[n("div"),n("div"),n("div"),n("div")])]):e._e()},r=[],i=(n("a9e3"),{name:"DFLoadingIndicator",props:{loading:{type:Boolean,required:!0},label:{type:String,required:!1,default:null},progress:{type:Number,required:!1,default:null}}}),o=i,s=(n("8411"),n("2877")),l=Object(s["a"])(o,a,r,!1,null,"5c6ab104",null);t["a"]=l.exports},dbbd:function(e,t,n){"use strict";n("ac1f"),n("5319");var a={getFileNameFromPath:function(e){return e?e.replace(/^.*[\\/]/,""):e}};t["a"]=a},dbde:function(e,t,n){},e4d7:function(e,t,n){"use strict";n("17a6")},e7e7:function(e,t,n){},f1a5:function(e,t,n){"use strict";n("dbde")},f3b7:function(e,t,n){},f781:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isGroup?n("div",{class:e.cssClasses},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-header"},[e._v(" "+e._s(e.def.title)+" ")]),n("div",{staticClass:"card-body"},[n("DFFormLayout",{attrs:{uuid:e.def.uuid,record:e.data,rows:e.def.layout.rows}})],1),e.def.footer?n("div",{staticClass:"card-footer"},[e._v(" "+e._s(e.def.footer)+" ")]):e._e()])]):e.isHidden?n(e.def.field.render_params.form,{tag:"component",attrs:{def:e.def.field,data:e.data,errors:e.errors,"show-label-or-help-text":e.showLabelOrHelpText}}):n("div",{class:e.cssClasses+e.columnClasses},[n(e.def.field.render_params.form,{tag:"component",attrs:{def:e.def.field,data:e.data,errors:e.errors,"show-label-or-help-text":e.showLabelOrHelpText},on:{onValueConfirmed:e.onValueConfirmed}})],1)},r=[],i=(n("d3b7"),n("3ca3"),n("ddb0"),n("8c2d")),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DFWidgetBase",{key:e.fieldKey,attrs:{def:e.def,data:e.data,errors:e.errors,"show-label-or-help-text":e.showLabelOrHelpText}},[e.indeterminate?n("input",{directives:[{name:"indeterminate",rawName:"v-indeterminate",value:!0,expression:"true"}],class:e.def.render_params.field_class,attrs:{slot:"input",id:e.def.uuid,type:"checkbox",name:e.def.name,"aria-describedby":e.def.help_text&&e.showLabelOrHelpText?e.def.name+"-help":null,readonly:e.readonly,disabled:!0===e.def.read_only},domProps:{checked:!1},on:{change:e.change},slot:"input"}):e._e(),e.indeterminate?e._e():n("input",{directives:[{name:"indeterminate",rawName:"v-indeterminate",value:!1,expression:"false"}],class:e.def.render_params.field_class,attrs:{slot:"input",id:e.def.uuid,type:"checkbox",name:e.def.name,"aria-describedby":e.def.help_text&&e.showLabelOrHelpText?e.def.name+"-help":null,readonly:e.readonly,disabled:!0===e.def.read_only},domProps:{checked:e.internalValue},on:{change:e.change},slot:"input"})])},s=[],l=n("2ef0"),d=n.n(l),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isHidden?n("input",{attrs:{type:"hidden",name:e.def.name},domProps:{value:e.data[e.def.name]}}):n("div",{class:e.def.render_params.container_class,attrs:{id:"container-"+e.def.uuid}},[!1===e.labelAfterElement&&e.showLabelOrHelpText?n("DFWidgetBaseLabel",{attrs:{data:e.data,def:e.def}}):e._e(),e._t("input"),e.labelAfterElement&&e.showLabelOrHelpText?n("DFWidgetBaseLabel",{attrs:{data:e.data,def:e.def}}):e._e(),e._t("help",(function(){return[e.def.help_text&&e.showLabelOrHelpText?n("small",{staticClass:"form-text text-muted",attrs:{id:e.def.name+"-help"}},[e._v(e._s(e.def.help_text))]):e._e()]})),e._t("error",(function(){return[e.getErrorText?n("small",{staticClass:"invalid-feedback d-block",attrs:{id:e.def.name+"-err"}},[e._v(e._s(e.getErrorText))]):e._e()]}))],2)},u=[],f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.def.label?n("label",{class:e.def.render_params.label_class,attrs:{id:"label-"+e.def.uuid,for:e.def.name}},[e._v(" "+e._s(e.def.label)+" ")]):e._e()},m=[],h={name:"DFWidgetBaseLabel",props:{def:{type:Object,required:!0},data:{type:Object,required:!1,default:function(){}}}},p=h,b=n("2877"),g=Object(b["a"])(p,f,m,!1,null,"61596502",null),v=g.exports,y={name:"DFWidgetBase",components:{DFWidgetBaseLabel:v},props:{def:{type:Object,required:!0},data:{type:Object,required:!0},errors:{type:Object,required:!0},showLabelOrHelpText:{type:Boolean,default:!0}},computed:{isHidden:function(){return this.def.visibility.form===i["a"].HIDDEN},labelAfterElement:function(){return this.def.render_params.label_after_element},getErrorText:function(){try{if(this.errors&&this.errors[this.def.name])return this.errors[this.def.name]}catch(e){}return""}}},_=y,w=Object(b["a"])(_,c,u,!1,null,"b8066596",null),x=w.exports,j={name:"DFWidgetCheckbox",components:{DFWidgetBase:x},directives:{indeterminate:function(e,t){e.indeterminate=Boolean(t.value)}},props:{def:{type:Object,required:!0},data:{type:Object,required:!0},errors:{type:Object,required:!0},showLabelOrHelpText:{type:Boolean,default:!0}},data:function(){return{indeterminate:!1,readonly:!0===this.def.read_only,internalValue:!1,fieldKey:Math.round(1e3*Math.random())}},computed:{value:{get:function(){return this.data[this.def.name]},set:function(e){this.data[this.def.name]=e,this.$emit("onValueConfirmed",!0)}}},mounted:function(){this.indeterminate=this.def.allow_null&&(void 0===this.value||null===this.value),this.value&&(this.internalValue=!0),void 0!==this.value&&null!==this.value||(this.internalValue=null)},methods:{change:function(e){var t=d.a.clone(this.internalValue),n=e.currentTarget.checked;this.def.allow_null?(!0===t?(this.indeterminate=!0,this.internalValue=null):(null===t||void 0===t)&&this.indeterminate&&n?(this.indeterminate=!1,this.internalValue=!1):!1===t&&!0===n&&(this.internalValue=!0,this.indeterminate=!1),this.fieldKey=Math.round(1e3*Math.random()),this.value=d.a.clone(this.internalValue)):this.value=d.a.clone(n)}}},D=j,F=(n("905a"),Object(b["a"])(D,o,s,!1,null,null,null)),k=F.exports,C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DFWidgetBase",{attrs:{def:e.def,data:e.data,errors:e.errors,"show-label-or-help-text":e.showLabelOrHelpText}},[n("ckeditor",{attrs:{slot:"input",editor:e.editor,config:e.editorConfig},slot:"input",model:{value:e.editorData,callback:function(t){e.editorData=t},expression:"editorData"}})],1)},O=[],T=n("fb3d"),L=n.n(T),E=n("6930"),S=n.n(E),R={name:"DFWidgetCKEditor",components:{DFWidgetBase:x,ckeditor:S.a.component},props:{def:{type:Object,required:!0},data:{type:Object,required:!0},errors:{type:Object,required:!0},showLabelOrHelpText:{type:Boolean,default:!0}},data:function(){return{editor:L.a,editorData:"<p>Type some text...</p>",editorConfig:{}}}},I=R,q=Object(b["a"])(I,C,O,!1,null,"1d96c1b8",null),H=q.exports,$=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DFWidgetBase",{attrs:{def:e.def,data:e.data,errors:e.errors,"show-label-or-help-text":e.showLabelOrHelpText}},[n("div",{key:e.def.uuid,staticClass:"input-group df-datetime-class",attrs:{slot:"input",id:e.def.uuid,name:e.def.name},slot:"input"},[n("datetime",{key:e.datetimeFieldKey,staticStyle:{display:"inline-block",float:"left",width:"85%"},attrs:{type:e.inputType,phrases:{ok:e.gettext("Ok"),cancel:e.gettext("Cancel")},"input-class":"df-widget-datetime-input form-control",format:e.displayFormat},on:{input:e.dateTimeInput},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}}),n("div",{staticClass:"input-group-append",staticStyle:{display:"inline-block",float:"left",width:"15%"}},[n("div",{staticClass:"btn btn-sm clear-datetime shadow-none input-group-text",staticStyle:{border:"none","justify-content":"center"},attrs:{type:"button"},on:{click:e.clear}},[n("IonIcon",{attrs:{name:"trash-outline"}})],1)])],1)])},A=[],P=n("1315"),M=n("859b"),U=n("cf2c"),V=n("75fb"),B=n("764b"),N={name:"DFWidgetDatetime",components:{DFWidgetBase:x,Datetime:M["Datetime"],IonIcon:B["a"]},mixins:[V["a"]],props:{def:{type:Object,required:!0},data:{type:Object,required:!0},errors:{type:Object,required:!0},showLabelOrHelpText:{type:Boolean,default:!0}},data:function(){return{datetimeFieldKey:Math.round(1e3*Math.random())}},computed:{inputType:function(){return this.def.render_params.input_type},maxLength:function(){return this.def.render_params.max_length||1<<24},isTextArea:function(){return!0===this.def.textarea},value:{get:function(){return this.data[this.def.name]},set:function(e){return d.a.size(e)&&"datetime"!==this.inputType&&(e="date"===this.inputType?P["DateTime"].fromISO(e).toFormat("yyyy-MM-dd"):P["DateTime"].fromISO(e).toFormat("HH:mm:ss")),this.data[this.def.name]=e,this.data[this.def.name]}},displayFormat:function(){return this.def.render_params&&this.def.render_params.form_format?this.def.render_params.form_format:U["a"].defaultDatetimeFormat}},methods:{onValueConfirmed:function(e){this.$emit("onValueConfirmed",e)},dateTimeInput:function(){this.onValueConfirmed(!0)},clear:function(){this.value="",this.datetimeFieldKey=Math.round(1e3*Math.random())}}},W=N,z=(n("17db"),Object(b["a"])(W,$,A,!1,null,null,null)),K=z.exports,G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DFWidgetBase",{attrs:{def:e.def,data:e.data,errors:e.errors,"show-label-or-help-text":e.showLabelOrHelpText}},[n("div",{key:e.def.uuid,attrs:{slot:"input",id:e.def.uuid},slot:"input"},[n("div",{staticClass:"input-group"},[n("input",{key:e.fileInputKey,ref:"file",attrs:{type:"file",readonly:!0===e.def.read_only,disabled:!0===e.def.read_only,name:e.def.name},on:{change:e.selectFile}})]),n("div",[e.currentFile?n("div",{staticClass:"progress",staticStyle:{"margin-top":"0.3em"}},[n("div",{staticClass:"progress-bar progress-bar-info progress-bar-striped",style:{width:e.progress+"%"},attrs:{role:"progressbar","aria-valuenow":e.progress,"aria-valuemin":"0","aria-valuemax":"100"}},[e._v(" "+e._s(e.progress)+"% ")])]):e._e(),n("div",[e.showFileOnServer?n("div",[e._v(" "+e._s(e.getFileName(e.currentFile?e.currentFile.name:e.data[e.def.name]))+" "),n("button",{staticClass:"close",staticStyle:{color:"red"},attrs:{type:"button","aria-label":"Close"},on:{click:e.removeFile}},[n("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])]):e._e()])])])])},J=[],Q=n("cbde"),Y=n("dbbd"),X={name:"DFWidgetFile",components:{DFWidgetBase:x},props:{def:{type:Object,required:!0},data:{type:Object,required:!0},errors:{type:Object,required:!0},showLabelOrHelpText:{type:Boolean,default:!0}},data:function(){return{currentFile:void 0,progress:0,showFileOnServer:!1,fileInputKey:Math.round(1e3*Math.random())}},mounted:function(){this.showFileOnServer=!!d.a.clone(this.data[this.def.name])},methods:{getFileName:function(e){return Y["a"].getFileNameFromPath(e)},selectFile:function(){this.upload()},removeFile:function(){this.data[this.def.name]=null,this.progress=0,this.fileInputKey=Math.round(1e3*Math.random()),this.showFileOnServer=!1,this.currentFile=void 0},upload:function(){var e=this;this.progress=0,this.currentFile=this.$refs.file.files.item(0);var t=new FormData;t.append("file",this.currentFile,"".concat(this.currentFile.name)),this.showFileOnServer=!0,this.progress=0,this.progress=45,this.progress=60,Q["a"].post("/dynamicforms/preupload-file/",t,{showProgress:!1}).then((function(t){e.data[e.def.name]=t.data.identifier,e.progress=100})).catch((function(t){e.progress=0,e.showFileOnServer=!1,e.currentFile=void 0,e.fileInputKey=Math.round(1e3*Math.random()),console.error(t)}))}}},Z=X,ee=Object(b["a"])(Z,G,J,!1,null,null,null),te=ee.exports,ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DFWidgetBase",{attrs:{def:e.def,data:e.data,errors:e.errors,"show-label-or-help-text":e.showLabelOrHelpText}},["checkbox"!==e.inputType||e.isTextArea?"radio"!==e.inputType||e.isTextArea?e.isTextArea?n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],class:e.def.render_params.field_class,attrs:{slot:"input",id:e.def.uuid,name:e.def.name,placeholder:e.def.placeholder,maxlength:e.maxLength,rows:"4",readonly:!0===e.def.read_only,disabled:!0===e.def.read_only},domProps:{value:e.value},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onValueConfirmed(!0)},input:[function(t){t.target.composing||(e.value=t.target.value)},function(t){return e.onValueConfirmed(!1)}],change:function(t){return e.onValueConfirmed(!1)}},slot:"input"}):n("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],class:e.def.render_params.field_class,attrs:{slot:"input",id:e.def.uuid,name:e.def.name,"aria-describedby":e.def.help_text&&e.showLabelOrHelpText?e.def.name+"-help":null,placeholder:e.def.placeholder,pattern:e.def.render_params.pattern,min:e.def.render_params.min,max:e.def.render_params.max,step:e.def.render_params.step,minlength:e.def.render_params.min_length,maxlength:e.maxLength,size:e.def.render_params.size,readonly:!0===e.def.read_only,disabled:!0===e.def.read_only,type:e.inputType},domProps:{value:e.value},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onValueConfirmed(!0)},input:[function(t){t.target.composing||(e.value=t.target.value)},function(t){return e.onValueConfirmed(!1)}],change:function(t){return e.onValueConfirmed(!1)}},slot:"input"}):n("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],class:e.def.render_params.field_class,attrs:{slot:"input",id:e.def.uuid,name:e.def.name,"aria-describedby":e.def.help_text&&e.showLabelOrHelpText?e.def.name+"-help":null,placeholder:e.def.placeholder,pattern:e.def.render_params.pattern,min:e.def.render_params.min,max:e.def.render_params.max,step:e.def.render_params.step,minlength:e.def.render_params.min_length,maxlength:e.maxLength,size:e.def.render_params.size,readonly:!0===e.def.read_only,disabled:!0===e.def.read_only,type:"radio"},domProps:{checked:e._q(e.value,null)},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onValueConfirmed(!0)},input:function(t){return e.onValueConfirmed(!1)},change:[function(t){e.value=null},function(t){return e.onValueConfirmed(!1)}]},slot:"input"}):n("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],class:e.def.render_params.field_class,attrs:{slot:"input",id:e.def.uuid,name:e.def.name,"aria-describedby":e.def.help_text&&e.showLabelOrHelpText?e.def.name+"-help":null,placeholder:e.def.placeholder,pattern:e.def.render_params.pattern,min:e.def.render_params.min,max:e.def.render_params.max,step:e.def.render_params.step,minlength:e.def.render_params.min_length,maxlength:e.maxLength,size:e.def.render_params.size,readonly:!0===e.def.read_only,disabled:!0===e.def.read_only,type:"checkbox"},domProps:{checked:Array.isArray(e.value)?e._i(e.value,null)>-1:e.value},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onValueConfirmed(!0)},input:function(t){return e.onValueConfirmed(!1)},change:[function(t){var n=e.value,a=t.target,r=!!a.checked;if(Array.isArray(n)){var i=null,o=e._i(n,i);a.checked?o<0&&(e.value=n.concat([i])):o>-1&&(e.value=n.slice(0,o).concat(n.slice(o+1)))}else e.value=r},function(t){return e.onValueConfirmed(!1)}]},slot:"input"})])},ae=[],re={name:"DFWidgetInput",components:{DFWidgetBase:x},props:{def:{type:Object,required:!0},data:{type:Object,required:!0},errors:{type:Object,required:!0},showLabelOrHelpText:{type:Boolean,default:!0}},computed:{inputType:function(){return this.def.render_params.input_type},maxLength:function(){return this.def.render_params.max_length||1<<24},isTextArea:function(){return!0===this.def.textarea},value:{get:function(){return this.data[this.def.name]},set:function(e){this.data[this.def.name]=e}}},methods:{onValueConfirmed:function(e){this.$emit("onValueConfirmed",e)}}},ie=re,oe=Object(b["a"])(ie,ne,ae,!1,null,null,null),se=oe.exports,le=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DFWidgetBase",{attrs:{def:e.def,data:e.data,errors:e.errors,"show-label-or-help-text":e.showLabelOrHelpText}},[n("div",{staticClass:"input-group",attrs:{slot:"input"},slot:"input"},["checkbox"===e.passwordFieldType?n("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],class:e.def.render_params.field_class,attrs:{id:e.def.uuid,name:e.def.name,"aria-describedby":e.def.help_text&&e.showLabelOrHelpText?e.def.name+"-help":null,placeholder:e.def.placeholder,pattern:e.def.render_params.pattern,type:"checkbox"},domProps:{value:e.value,checked:Array.isArray(e.value)?e._i(e.value,e.value)>-1:e.value},on:{change:function(t){var n=e.value,a=t.target,r=!!a.checked;if(Array.isArray(n)){var i=e.value,o=e._i(n,i);a.checked?o<0&&(e.value=n.concat([i])):o>-1&&(e.value=n.slice(0,o).concat(n.slice(o+1)))}else e.value=r}}}):"radio"===e.passwordFieldType?n("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],class:e.def.render_params.field_class,attrs:{id:e.def.uuid,name:e.def.name,"aria-describedby":e.def.help_text&&e.showLabelOrHelpText?e.def.name+"-help":null,placeholder:e.def.placeholder,pattern:e.def.render_params.pattern,type:"radio"},domProps:{value:e.value,checked:e._q(e.value,e.value)},on:{change:function(t){e.value=e.value}}}):n("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],class:e.def.render_params.field_class,attrs:{id:e.def.uuid,name:e.def.name,"aria-describedby":e.def.help_text&&e.showLabelOrHelpText?e.def.name+"-help":null,placeholder:e.def.placeholder,pattern:e.def.render_params.pattern,type:e.passwordFieldType},domProps:{value:e.value,value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}}),n("span",{staticClass:"input-group-text",attrs:{id:"pwf-"+e.def.uuid},on:{click:function(t){return t.stopPropagation(),e.toggle_password.apply(null,arguments)}}},[n("IonIcon",{staticClass:"pass-icon",attrs:{name:e.isPassword?"eye-outline":"eye-off-outline"}})],1)])])},de=[],ce={name:"DFWidgetPassword",components:{IonIcon:B["a"],DFWidgetBase:x},props:{def:{type:Object,required:!0},data:{type:Object,required:!0},errors:{type:Object,required:!0},showLabelOrHelpText:{type:Boolean,default:!0}},data:function(){return{passwordFieldType:"password",isPassword:!0}},computed:{value:{get:function(){return this.data[this.def.name]},set:function(e){this.data[this.def.name]=e}}},methods:{toggle_password:function(){this.isPassword=!this.isPassword,this.passwordFieldType="password"===this.passwordFieldType?"text":"password"}}},ue=ce,fe=(n("6fd8"),Object(b["a"])(ue,le,de,!1,null,"21d81dcb",null)),me=fe.exports,he=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DFWidgetBase",{attrs:{def:e.def,data:e.data,errors:e.errors,"show-label-or-help-text":e.showLabelOrHelpText}},[n("div",{attrs:{slot:"input"},slot:"input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],class:e.def.render_params.field_class,attrs:{id:e.def.uuid,type:"hidden",name:e.def.name},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}}),n("div",{staticClass:"alert alert-info"},[e._v(" Table-type nested serializers not supported for direct rendering yet. Please create your own "),n("b",[e._v("as_component_def_table()")]),e._v(" function and appropriate "),n("b",[e._v("visual component")]),e._v(". ")])])])},pe=[],be={name:"DFWidgetPlaceholder",components:{DFWidgetBase:x},props:{def:{type:Object,required:!0},data:{type:Object,required:!0},errors:{type:Object,required:!0},showLabelOrHelpText:{type:Boolean,default:!0}},computed:{value:{get:function(){return this.data[this.def.name]},set:function(e){this.data[this.def.name]=e}}},methods:{}},ge=be,ve=Object(b["a"])(ge,he,pe,!1,null,null,null),ye=ve.exports,_e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DFWidgetBase",{attrs:{def:e.def,data:e.data,errors:e.errors,"show-label-or-help-text":e.showLabelOrHelpText}},[n("div",{key:e.def.uuid,staticClass:"df-select-class",attrs:{slot:"input",id:e.def.uuid,name:e.def.name,"data-value":e.selenium?e.result:null,"data-options":e.selenium?e.options_json:null},slot:"input"},[n("AMultiselect",{attrs:{options:e.options,"close-on-select":!0,"clear-on-select":!0,"hide-selected":!1,"preserve-search":!0,"preselect-first":!1,label:"text","track-by":"id",disabled:e.disabled,multiple:e.multiple,taggable:e.taggable,"aria-describedby":e.def.help_text&&e.showLabelOrHelpText?e.def.field_name+"-help":null,placeholder:e.def.placeholder},on:{select:e.onSelect,input:e.onInput,tag:e.onTag},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)])},we=[],xe=(n("e9c4"),n("d81d"),n("ac1f"),n("1276"),n("4de4"),n("caad"),n("2532"),n("7db0"),n("8e5f")),je=n.n(xe),De={name:"DFWidgetSelect",components:{DFWidgetBase:x,AMultiselect:je.a},props:{def:{type:Object,required:!0},data:{type:Object,required:!0},errors:{type:Object,required:!0},showLabelOrHelpText:{type:Boolean,default:!0}},emits:["update:modelValue"],data:function(){return{selected:null,disabled:!1,required:!1,selenium:!0}},computed:{options:function(){return this.def.choices},options_json:function(){return JSON.stringify(this.options)},multiple:function(){return this.def.render_params.multiple},taggable:function(){return this.def.render_params.allow_tags},result:{get:function(){return this.selected?this.multiple?this.selected.map((function(e){return e.id})):this.selected.id:""},set:function(e){if(null!=e)if(this.multiple){var t=e.constructor===Array?e.map(String):e.split(",");this.selected=this.options.filter((function(e){return t.includes("".concat(e.id))}))}else this.selected=this.options.find((function(t){return String(t.id)===String(e)}));else this.selected=null}}},watch:{selected:function(){this.data[this.def.name]=this.result}},mounted:function(){var e=this;this.multiple||this.def.allow_null||this.data[this.def.name]||!this.options?this.result=this.data[this.def.name]:this.result=this.options[0].id,this.selenium&&(window["setSelectValue ".concat(this.def.uuid)]=function(t){e.result=t})},destroyed:function(){this.selenium&&delete window["setSelectValue ".concat(this.def.uuid)]},methods:{onSelect:function(e){this.data[this.def.name]=this.result,this.$emit("itemSelected",e),this.$emit("onValueConfirmed",!0)},onInput:function(e){null===e&&(this.data[this.def.name]=this.result,this.$emit("itemSelected",e))},onTag:function(e){var t={id:e,text:e};this.def.choices.push(t),this.multiple?this.selected.push(t):this.selected=t}}},Fe=De,ke=(n("9851"),Object(b["a"])(Fe,_e,we,!1,null,"0b9d155f",null)),Ce=ke.exports,Oe={name:"DFFormColumn",components:{DFFormLayout:function(){return Promise.resolve().then(n.bind(null,"b6bd"))},DFWidgetInput:se,DFWidgetPassword:me,DFWidgetCKEditor:H,DFWidgetSelect:Ce,DFWidgetCheckbox:k,DFWidgetFile:te,DFWidgetPlaceholder:ye,DFWidgetDatetime:K},props:{def:{type:Object,required:!0},data:{type:Object,required:!0},errors:{type:Object,required:!0},showLabelOrHelpText:{type:Boolean,default:!0},cssClasses:{type:String,default:"col"}},computed:{isGroup:function(){return"group"===this.def.type},isHidden:function(){return this.def.field.visibility.form===i["a"].HIDDEN},columnClasses:function(){var e=this.def.width_classes;return e?" ".concat(e):""}},methods:{onValueConfirmed:function(e){this.$emit("onValueConfirmed",e)}}},Te=Oe,Le=(n("b9c1"),Object(b["a"])(Te,a,r,!1,null,null,null));t["a"]=Le.exports},fdf9:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n(e.component,{key:e.drawSeq,tag:"component",attrs:{configuration:e.processedConfiguration},on:{setTableFilter:e.setTableFilter}})],1)},r=[],i=(n("4de4"),n("d3b7"),n("d81d"),n("4e82"),n("159b"),n("99af"),n("ac1f"),n("5319"),n("1157")),o=n.n(i),s=n("2ef0"),l=n.n(s),d=n("cbde"),c=n("cf2c"),u=n("d4ec"),f=n("bee2"),m=(n("07ac"),n("b64b"),n("13d5"),n("c950")),h=function(){function e(t,n,a,r){Object(u["a"])(this,e),this.actions=t,this.showModal=n,this.tableUuid=a,this.filterCache={};var i=r;while(!i.$router&&i.$parent)i=i.$parent;this.$router=i.$router,this.decorateActions()}return Object(f["a"])(e,[{key:"list",get:function(){return Object.values(this.actions)}},{key:"decorateActions",value:function(){var e=this;Object.keys(this.actions).map((function(t){var n=e.actions[t];if(n.action&&n.action.href){n.elementType="a";var a=n.action.href;n.action.router_name&&(a=e.$router.resolve({name:n.action.href}).href),n.bindAttrs={href:a}}else n.elementType="div",n.bindAttrs={};return n}))}},{key:"filter",value:function(t,n){var a=this,r=t+(n?"|".concat(n):"");return void 0===this.filterCache[r]&&(this.filterCache[r]=new e(Object.values(this.actions).filter((function(e){return e.position===t&&(null===e.field_name||e.field_name===n)})).reduce((function(e,t){return e[t.name]=a.actions[t.name],e}),{}),this.showModal,this.tableUuid,this)),this.filterCache[r]}},{key:"exec",value:function(e,t,n){m["a"].$emit("tableActionExecuted_".concat(this.tableUuid),{event:e,action:t,data:n})}}]),e}(),p=h,b=n("8c2d");n("a434");function g(e,t){var n=null,a=null;t&&t.length&&(n=t[0].id,a=t[t.length-1].id),e.getVisibilityHandler=function(t){return(n===t||a===t)&&{callback:e.loadMoreRows,once:!0}}}function v(e){return e.reduce((function(e,t,n){return e[t.id]=n,e}),{})}function y(e,t){return function(n,a){var r=a||v(t),i=!1;n.map((function(e){var n=r[e.id];return null!=n?(t[n]=e,i=!0):t.push(e),null})),i&&e.drawSeq++}}function _(e,t){return function(n){var a=n.id;a&&d["a"].get(e.detail_url.replace("--record_id--",a),{headers:{"x-viewmode":"TABLE_ROW"}}).then((function(e){t.updateRows([e.data])})).catch((function(e){console.error(e)})).finally((function(){e.loading=!1}))}}function w(e,t){return function(n,a){var r=a||v(t);t.splice(r[n],1),e.drawSeq++}}function x(e,t){return function(n){n&&(e.loading=!0,d["a"].get(e.rows.next,{headers:{"x-viewmode":"TABLE_ROW","x-pagination":1}}).then((function(n){var a=v(e.rows.results);t.updateRows(n.data.results,a),e.rows.next=n.data.next,g(t,n.data.results.length&&n.data.next?n.data.results:null)})).catch((function(e){console.error(e)})).finally((function(){e.loading=!1})))}}var j=function(e,t){var n=[],a=null;return t&&t.results&&t.results.constructor===Array&&(n=t.results,a=t.next),g(n,n.length&&a?n:null),n.loadMoreRows=x(e,n),n.updateRows=y(e,e.rows.results),n.updateRowFromForm=_(e,e.rows.results),n.deleteRow=w(e,e.rows.results),n},D=j,F=(n("caad"),n("2532"),n("498a"),n("a9e3"),n("c975"),n("1276"),n("a15b"),n("dbbd")),k=function(){function e(t){Object(u["a"])(this,e),this._columnDef=t}return Object(f["a"])(e,[{key:"name",get:function(){return this._columnDef.name}},{key:"label",get:function(){return this._columnDef.label}},{key:"align",get:function(){return"decimal"===this._columnDef.alignment?"right":this._columnDef.alignment}},{key:"table_classes",get:function(){return this._columnDef.table_classes}},{key:"ordering",get:function(){return this._columnDef.ordering}},{key:"visibility",get:function(){switch(this._columnDef.visibility){case 1:return b["a"].SUPPRESS;case 5:return b["a"].HIDDEN;case 8:return b["a"].INVISIBLE;case 10:return b["a"].FULL;default:return console.warn("Table column came with visibility set to ".concat(this._columnDef.visibility,", but we don't know")+" that constant"),b["a"].FULL}}},{key:"isOrdered",get:function(){return this.ordering.includes("ordering")}},{key:"th_classes",get:function(){return"".concat(this.table_classes," ").concat(this.isOrdered?"ordering":"").trim()}},{key:"isAscending",get:function(){return this.isOrdered&&this.ordering.includes("asc")}},{key:"isDescending",get:function(){return this.isOrdered&&this.ordering.includes("desc")}},{key:"isUnsorted",get:function(){return this.isOrdered&&this.ordering.includes("unsorted")}},{key:"cycleOrdering",get:function(){return this.isAscending?"desc":this.isDescending?"unsorted":"asc"}},{key:"setSorted",value:function(e,t){void 0===t&&(t=this.orderIndex>0?this.orderIndex:1),this.isOrdered?"asc"===e||"desc"===e||"unsorted"===e?this._columnDef.ordering="ordering ".concat(e," ").concat("unsorted"===e?"":"seg-".concat(t)):console.warn('unknown sort direction "'.concat(e,'" for the column ').concat(this.name,". not doing anything")):console.warn("column $(this.name) is not orderable. Why are you trying to set its order direction?")}},{key:"ascDescChar",get:function(){return this.isOrdered?this.isAscending?"▲":this.isDescending?"▼":this.isUnsorted?"↕":"":""}},{key:"orderIndex",get:function(){if(!this.isOrdered)return 0;var e=/(?:seg-)(\d+)/.exec(this.ordering);return null!=e?Number(e[1]):0}},{key:"orderIndexChar",get:function(){return this.orderIndex>0?String.fromCharCode(9312+this.orderIndex-1):""}},{key:"render_params",get:function(){return this._columnDef.render_params||{}}},{key:"renderDecoratorComponentName",get:function(){if(this.render_params.table){var e=this.render_params.table;return"#"===e.substr(0,1)?e.substr(1):""}return null}},{key:"renderDecoratorFunction",get:function(){if(this.render_params&&this.render_params.table){var e=this.render_params.table;if("df-tablecell-"!==e.substr(0,13))return e.split(".").reduce((function(e,t){return e[t]}),window);var t=e.substr(13);switch(t){case"bool":return function(e,t,n){return"<code>".concat(n,"</code>")};case"link":return function(e,t,n){return'<a href="'.concat(n,'">').concat(n,"</a>")};case"email":return function(e,t,n){var a=n.includes("<")?n.substr(0,n.indexOf("<")).trim():n;return'<a href="mailto:'.concat(n,'">').concat(a,"</a>")};case"file":return function(e,t,n){return n?'<a href="#" onclick=\'event.stopPropagation();window.open("'.concat(n,'", "_blank")\'>').concat(F["a"].getFileNameFromPath(n),"</a>"):null};case"ipaddr":return function(e,t,n){var a=n.split(".");return 4===a.length&&(n=a.map((function(e){var t=e.length<3?'<span style="opacity: .5">'.concat("000".slice(e.length-3),"</span>"):"";return t+e})).join(".")),'<code class="text-nowrap">'.concat(n,"</code>")}}}return function(e,t,n){return n}}}]),e}(),C=k,O=n("6deb"),T=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"card"},[n("div",{staticClass:"card-header"},[e._v(" "+e._s(e.configuration.tableLabel)+" "),n("div",{staticClass:"float-right"},[n("Actions",{attrs:{actions:e.actions.filter("HEADER")}})],1)]),n("div",{staticClass:"card-body"},[n("table",{staticClass:"table",attrs:{id:"DFTable"+e.tableID}},[n("DFTableHead",{attrs:{columns:e.columns,filter:e.filter,"table-id":e.tableID},on:{setTableFilter:e.setTableFilter}}),n("DFTableBody",{attrs:{columns:e.columns,rows:e.rows,actions:e.actions}}),n("DFTableFoot",{attrs:{"columns-length":e.colsLen,"rows-length":e.rowsLen,loading:e.loading,"no-data-label":e.noDataLabel}})],1)])])},L=[],E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.actions.list.length>0?n("div",{staticClass:"actions-holder"},e._l(e.actions.list,(function(t){return n(t.elementType,e._b({key:t.name+t.icon,tag:"component",staticClass:"btn btn-sm btn-info text-nowrap dynamicforms-actioncontrol button",attrs:{name:"btn-"+t.name},on:{click:function(n){return n.stopPropagation(),e.actions.exec(n,t,e.row)}}},"component",t.bindAttrs,!1),[n("IonIcon",{staticClass:"d-inline-block",attrs:{name:t.icon}}),n("span",{staticClass:"d-none d-md-inline-block"},[e._v(e._s(t.label))])],1)})),1):e._e()},S=[],R=n("764b"),I={name:"Actions",components:{IonIcon:R["a"]},props:{row:{type:Object,default:function(){return null}},actions:{type:Object,required:!0}}},q=I,H=(n("aa21"),n("2877")),$=Object(H["a"])(q,E,S,!1,null,"fe1d0e0e",null),A=$.exports,P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("tbody",e._l(e.rows,(function(t){return n("tr",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:e.rows.getVisibilityHandler(t.id),expression:"rows.getVisibilityHandler(row.id)"}],key:t.id,style:t.df_control_data.row_css_style,attrs:{"data-id":t.id},on:{click:function(n){return e.rowClick(n,"ROW_CLICK",t)},mouseup:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"right",39,n.key,["Right","ArrowRight"])||"button"in n&&2!==n.button?null:e.rowClick(n,"ROW_RIGHTCLICK",t)}}},e._l(e.columns,(function(a){return n("td",{key:a.name,attrs:{"data-name":a.name}},[n("Actions",{attrs:{row:t,actions:e.actions.filter("FIELD_START",a.name)}}),a.renderDecoratorComponentName?n(a.renderDecoratorComponentName,{tag:"component",attrs:{row:t,column:a,value:t[a.name],"body-id":e.$parent._uid}}):["#actions-row_start","#actions-row_end"].includes(a.name)?n("Actions",{attrs:{row:t,actions:e.actions.filter(a.name.substr(9).toUpperCase())}}):n("div",{staticStyle:{display:"inline-block"},domProps:{innerHTML:e._s(a.renderDecoratorFunction(t,a,t[a.name]))}}),n("Actions",{attrs:{row:t,actions:e.actions.filter("FIELD_END",a.name)}})],1)})),0)})),0)},M=[],U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{display:"inline-block"},domProps:{innerHTML:e._s(e.displayValue)}})},V=[],B=n("1315"),N={name:"DFTableCellDatetime",props:{column:{type:Object,required:!0},value:{type:null,required:!0}},computed:{format:function(){return this.column.render_params&&this.column.render_params.table_format?this.column.render_params.table_format:c["a"].defaultDatetimeFormat},displayValue:function(){return B["DateTime"].fromISO(this.value).toFormat(this.format)}}},W=N,z=Object(H["a"])(W,U,V,!1,null,"0b0b0eef",null),K=z.exports,G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{display:"inline-block"},domProps:{innerHTML:e._s(e.displayValue)}})},J=[],Q=n("a026"),Y={name:"DFTableCellFloat",props:{row:{type:Object,required:!0},column:{type:Object,required:!0},value:{type:null,required:!0},bodyId:{type:Number,required:!0}},computed:{displayValue:function(){if(null==this.value)return"";["dynamicforms","df-tablecell-float-configs"].reduce((function(e,t){return e[t]||(e[t]={})}),window);var e=window.dynamicforms["df-tablecell-float-configs"][this.bodyId];e||(e=Q["default"].observable({max_decimals:0,decimal_char:1.1.toLocaleString().substr(1,1)}),window.dynamicforms["df-tablecell-float-configs"][this.bodyId]=e);var t=this.value.toLocaleString(),n=t.indexOf(e.decimal_char),a=-1===n?0:t.substr(n+1).length;a>e.max_decimals&&(e.max_decimals=a),-1===n&&(t+=e.decimal_char);var r=Array(e.max_decimals+1-a).join("0");return this.column.render_params.table_show_zeroes?t+=r:t+=r?'<span style="visibility: hidden">'.concat(r,"</span>"):"",t}}},X=Y,Z=Object(H["a"])(X,G,J,!1,null,"07ff5be8",null),ee=Z.exports,te={name:"DFTableBody",components:{Actions:A,DFTableCellFloat:ee,DFTableCellDatetime:K},props:{columns:{type:Array,required:!0},rows:{type:Array,required:!0},actions:{type:Object,required:!0}},data:function(){return{}},methods:{rowClick:function(e,t,n){var a=this.actions.filter(t);a.list.forEach((function(t){a.exec(e,t,n)}))}}},ne=te,ae=Object(H["a"])(ne,P,M,!1,null,"2629517a",null),re=ae.exports,ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("tfoot",[0!==e.rowsLength||e.loading?n("DFTableLoadingIndicator",{attrs:{loading:e.loading,"columns-length":e.columnsLength}}):n("tr",{staticClass:"no-data-indicator"},[n("td",{attrs:{colspan:e.columnsLength}},[e._v(e._s(e.noDataLabel))])])],1)},oe=[],se=n("612d"),le=n.n(se),de=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.loading?n("tr",{staticClass:"loading-indicator"},[n("td",{attrs:{colspan:e.columnsLength}},[n("DFLoadingIndicator",{attrs:{loading:"loading"}})],1)]):e._e()},ce=[],ue=n("db3f"),fe={name:"DFTableLoadingIndicator",components:{DFLoadingIndicator:ue["a"]},props:{loading:{type:Boolean,required:!0,validator:function(e){return le.a.isBoolean(e)}},columnsLength:{type:Number,required:!0,validator:function(e){return le.a.isNumber(e)}}}},me=fe,he=(n("f1a5"),Object(H["a"])(me,de,ce,!1,null,"797a4c10",null)),pe=he.exports,be={name:"DFTableFoot",components:{DFTableLoadingIndicator:pe},props:{loading:{type:Boolean,required:!0,validator:function(e){return le.a.isBoolean(e)}},columnsLength:{type:Number,required:!0,validator:function(e){return le.a.isNumber(e)}},rowsLength:{type:Number,required:!0,validator:function(e){return le.a.isNumber(e)}},noDataLabel:{type:String,required:!0,validator:function(e){return le.a.isString(e)&&e.length>0}}}},ge=be,ve=(n("7a17"),Object(H["a"])(ge,ie,oe,!1,null,"3f0a07db",null)),ye=ve.exports,_e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",[n("tr",e._l(e.columns,(function(t,a){return n("th",{key:t.name,class:t.th_classes,on:{click:function(n){return e.colClicked(n,t,a)}}},[e._v(" "+e._s(t.label)+" "),t.isOrdered?n("span",{staticClass:"ordering"},[n("span",{staticClass:"ordering-arrow"},[e._v(e._s(t.ascDescChar))]),e._v(" "+e._s(t.orderIndexChar)+" ")]):e._e()])})),0),e.filter?n("DFTableFilterRow",{attrs:{configuration:e.filter},on:{setTableFilter:e.setTableFilter}}):e._e()],1)},we=[],xe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("tr",{staticClass:"dynamicforms-filterrow"},[e.actionsRowStart.list.length?n("th",{staticClass:"tr-th-action"},[n("Actions",{attrs:{row:null,actions:e.actionsRowStart}})],1):e._e(),e._l(e.columns,(function(t,a){return n("th",{key:a},[n("DFFormColumn",{key:a,attrs:{def:{field:t},data:e.filter,errors:{},"show-label-or-help-text":!1,"css-classes":""},on:{onValueConfirmed:e.onValueConfirmed}})],1)})),e.actionsRowEnd.list.length?n("th",{staticClass:"tr-th-action"},[n("Actions",{attrs:{row:null,actions:e.actionsRowEnd}})],1):e._e()],2)},je=[],De=n("f781"),Fe={name:"DFTableFilterRow",components:{DFFormColumn:De["a"],Actions:A},props:{configuration:{type:Object,required:!0}},data:function(){return{filter:{}}},computed:{uuid:function(){return this.configuration.uuid},actions:function(){return this.configuration.actions},actionsRowEnd:function(){return new p(this.actions,null,this.uuid,this).filter("FILTER_ROW_END")},actionsRowStart:function(){return new p(this.actions,null,this.uuid,this).filter("FILTER_ROW_START")},columns:function(){return l.a.filter(this.configuration.columns,(function(e){return e.visibility.table===b["a"].FULL}))}},methods:{onValueConfirmed:function(e){this.$emit("setTableFilter",{filter:this.filter,doFilter:e})}}},ke=Fe,Ce=(n("4e23"),Object(H["a"])(ke,xe,je,!1,null,"e63bca4e",null)),Oe=Ce.exports,Te={name:"DFTableHead",components:{DFTableFilterRow:Oe},props:{columns:{type:Array,required:!0},filter:{type:Object,default:function(){}},tableId:{type:Number,required:!0}},data:function(){return{style:null}},computed:{numSortedCols:function(){return this.columns.filter((function(e){return e.ordering.includes("seg-")})).length}},mounted:function(){this.globalStylesCreate()},beforeDestroy:function(){this.globalStylesRemove()},methods:{setTableFilter:function(e){this.$emit("setTableFilter",e)},globalStylesCreate:function(){var e=this;this.style=document.createElement("style"),this.columns.forEach((function(t,n){e.style.appendChild(document.createTextNode("#DFTable".concat(e.tableId," > thead > tr > th:nth-child(").concat(n+1,"),\n          #DFTable").concat(e.tableId," > tbody > tr > td:nth-child(").concat(n+1,") {\n            text-align: ").concat(t.align,";\n          }")))})),document.getElementsByTagName("head")[0].appendChild(this.style)},globalStylesRemove:function(){document.getElementsByTagName("head")[0].removeChild(this.style)},colClicked:function(e,t,n){if(t.isOrdered)if(e.altKey);else if(e.ctrlKey&&e.shiftKey)t.setSorted("unsorted");else if(e.ctrlKey)this.$parent.$parent.changeOrder(n,t.isDescending?"desc":"asc",1);else{var a=t.orderIndex,r=e.shiftKey?0===a?this.numSortedCols+1:a:1,i=e.shiftKey?this.column.isAscending?"desc":"asc":t.cycleOrdering;this.$parent.$parent.changeOrder(n,i,r,!e.shiftKey)}}}},Le=Te,Ee=(n("ad62"),Object(H["a"])(Le,_e,we,!1,null,"4ce598e4",null)),Se=Ee.exports,Re=0,Ie={name:"BootstrapTable",components:{DFTableFoot:ye,DFTableHead:Se,DFTableBody:re,Actions:A},props:{configuration:{type:Object,required:!0}},data:function(){return{style:null,tableID:Re++}},computed:{actions:function(){return this.configuration.actions},filter:function(){return this.configuration.filter},columns:function(){return this.configuration.columns},rows:function(){return this.configuration.rows},colsLen:function(){return this.configuration.columns.length},rowsLen:function(){return this.configuration.rows.length},loading:function(){return this.configuration.loading},noDataLabel:function(){return this.configuration.noDataString}},methods:{setTableFilter:function(e){this.$emit("setTableFilter",e)}}},qe=Ie,He=Object(H["a"])(qe,T,L,!1,null,"dfb7bd12",null),$e=He.exports,Ae={name:"DFTable",components:{BootstrapTable:$e},mixins:[O["a"]],props:{config:{type:Object,required:!0}},data:function(){var e=this.config||this.$parent;return{drawSeq:0,loading:!1,rows:e.rows,columns:l.a.filter(e.columns,(function(e){return b["a"].FULL===e.visibility.table})),titles:e.titles,actions:e.actions,uuid:e.uuid,list_url:e.list_url,detail_url:e.detail_url,editingRowURL:e.editingRowURL,editDialogTitle:e.editDialogTitle,filter:e.filter,filterQueryString:"",ordering_parameter:e.ordering_parameter,ordering_style:e.ordering_style}},computed:{processedConfiguration:function(){return{rows:this.loadableRows(this.rows),columns:this.columns.map((function(e){return new C(e)})),actions:new p(this.actions,this.showModal,this.uuid,this),loading:this.loading,noDataString:"No data",editDialogTitle:"Test dialog",editingRowURL:"",tableLabel:this.titles.table,filter:this.filter}},component:function(){return"".concat(c["a"].UI,"Table")},sortedColumns:function(){return this.processedConfiguration.columns.filter((function(e){return e.isOrdered&&!e.isUnsorted})).map((function(e){return{fieldName:e.name,direction:e.isAscending,index:e.orderIndex}})).sort((function(e,t){return e.index-t.index}))},orderingParam:function(){var e=c["a"].getObjectFromPath(this.ordering_style);return e?e(this.sortedColumns):this.sortedColumns.map((function(e){return(!0===e.direction?"":"-")+e.fieldName}))}},watch:{orderingParam:function(e,t){l.a.isEqual(e,t)||this.loadData()}},mounted:function(){var e=this,t="";this.columns.forEach((function(n,a){t+="#list-".concat(e.uuid," tbody tr td:nth-child(").concat(a+1,") {\n            text-align: ").concat(n.alignment,";\n          }\n          ")}));var n=document.createElement("style");n.appendChild(document.createTextNode(t)),document.head.appendChild(n)},methods:{changeOrder:function(e,t,n,a){var r=this.processedConfiguration.columns[e].orderIndex!==n;this.processedConfiguration.columns.forEach((function(i,o){o===e?i.setSorted(t,n):i.orderIndex>0&&(a?i.setSorted("unsorted"):r&&i.orderIndex>=n&&i.setSorted(i.isAscending?"asc":"desc",i.orderIndex+1))}))},loadData:function(){var e=this;this.loading=!0;var t="".concat(this.list_url,"?").concat(this.ordering_parameter,"=").concat(this.orderingParam);l.a.size(this.filterQueryString)&&(t+="&".concat(this.filterQueryString)),d["a"].get(t,{headers:{"x-viewmode":"TABLE_ROW","x-pagination":1}}).then((function(t){e.rows=t.data})).catch((function(e){console.error(e)})).finally((function(){e.loading=!1}))},loadableRows:function(e){return D(this,e)},showModal:function(e,t){"edit"===e.name?(this.editDialogTitle="".concat(this.titles.edit," ").concat(t.id),this.editingRowURL=this.detail_url.replace("--record_id--",t.id).replace(".json",".componentdef"),c["a"].dialog.fromURL(this.editingRowURL,e.name,this.uuid)):"add"===e.name?(this.editDialogTitle=this.titles.add,this.editingRowURL=this.detail_url.replace("--record_id--","new").replace(".json",".componentdef"),c["a"].dialog.fromURL(this.editingRowURL,null,this.uuid)):(this.editDialogTitle="unknown action ".concat(e.name,"... so, a stupid title"),this.editingRowURL="")},setTableFilter:function(e){this.filterQueryString=o.a.param(l.a.pickBy(l.a.clone(e.filter),(function(e){return l.a.isString(e)?l.a.size(e):null!==e&&void 0!==e}))),e.doFilter&&this.loadData()}}},Pe=Ae,Me=Object(H["a"])(Pe,a,r,!1,null,"72819b86",null);t["a"]=Me.exports}});
//# sourceMappingURL=df-components.js.map